<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Post-Process | ZZNEWCLEAR13</title>
<meta name=keywords content><meta name=description content="è¿™é‡Œæ˜¯zznewclear13çš„ï¼Œåˆ†äº«åˆ«å¤„æ‰¾ä¸åˆ°çš„å›¾å½¢å­¦å’ŒæŠ€æœ¯ç¾æœ¯ç›¸å…³å†…å®¹çš„ï¼Œä¸ªäººç½‘ç«™ã€‚"><meta name=author content="zznewclear13"><link rel=canonical href=https://zznewclear13.github.io/tags/post-process/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://zznewclear13.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://zznewclear13.github.io/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://zznewclear13.github.io/favicon.ico><link rel=apple-touch-icon href=https://zznewclear13.github.io/favicon.ico><link rel=mask-icon href=https://zznewclear13.github.io/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://zznewclear13.github.io/tags/post-process/index.xml><link rel=alternate hreflang=en href=https://zznewclear13.github.io/tags/post-process/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-JZ0FQH1VK5"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-JZ0FQH1VK5")}</script><meta property="og:title" content="Post-Process"><meta property="og:description" content="è¿™é‡Œæ˜¯zznewclear13çš„ï¼Œåˆ†äº«åˆ«å¤„æ‰¾ä¸åˆ°çš„å›¾å½¢å­¦å’ŒæŠ€æœ¯ç¾æœ¯ç›¸å…³å†…å®¹çš„ï¼Œä¸ªäººç½‘ç«™ã€‚"><meta property="og:type" content="website"><meta property="og:url" content="https://zznewclear13.github.io/tags/post-process/"><meta property="og:image" content="https://zznewclear13.github.io/images/address.png"><meta property="og:site_name" content="ZZNEWCLEAR13"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://zznewclear13.github.io/images/address.png"><meta name=twitter:title content="Post-Process"><meta name=twitter:description content="è¿™é‡Œæ˜¯zznewclear13çš„ï¼Œåˆ†äº«åˆ«å¤„æ‰¾ä¸åˆ°çš„å›¾å½¢å­¦å’ŒæŠ€æœ¯ç¾æœ¯ç›¸å…³å†…å®¹çš„ï¼Œä¸ªäººç½‘ç«™ã€‚"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://zznewclear13.github.io/ accesskey=h title="ZZNEWCLEAR13 (Alt + H)"><img src=https://zznewclear13.github.io/apple-touch-icon.png alt aria-label=logo height=35>ZZNEWCLEAR13</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://zznewclear13.github.io/now/ title=è¿›è¡Œæ—¶><span>è¿›è¡Œæ—¶</span></a></li><li><a href=https://zznewclear13.github.io/tags/ title=æ ‡ç­¾><span>æ ‡ç­¾</span></a></li><li><a href=https://zznewclear13.github.io/categories/ title=åˆ†ç±»><span>åˆ†ç±»</span></a></li><li><a href=https://zznewclear13.github.io/links/ title=å‹æƒ…é“¾æ¥><span>å‹æƒ…é“¾æ¥</span></a></li><li><a href=https://zznewclear13.github.io/search/ title="ğŸ” (Alt + /)" accesskey=/><span>ğŸ”</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://zznewclear13.github.io/>Home</a>&nbsp;Â»&nbsp;<a href=https://zznewclear13.github.io/tags/>Tags</a></div><h1>Post-Process</h1></header><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://zznewclear13.github.io/posts/images/RadialBlur.png alt="Radial Blur Cover"></figure><header class=entry-header><h2 class=entry-hint-parent>ä½¿ç”¨Group Shared MemoryåŠ é€Ÿå¾„å‘æ¨¡ç³Š</h2></header><div class=entry-content><p>å¾„å‘æ¨¡ç³Š åœ¨å†™äº†ä¸Šä¸€ç¯‡æ–‡ç« å¾„å‘åˆ†æ´¾Compute Shaderä¹‹åï¼Œå¾ˆè‡ªç„¶çš„å°±éœ€è¦ç”¨å¾„å‘æ¨¡ç³Šæ¥æ£€éªŒæˆ‘ä»¬çš„ç®—æ³•ã€‚
å¾„å‘æ¨¡ç³Šçš„æ•ˆæœåœ¨ç½‘ä¸Šå¯ä»¥è¯´æ˜¯ä¸€æ‰¾ä¸€å¤§å †äº†ï¼Œç™¾åˆ†ä¹‹ä¹åäº”çš„æ•™ç¨‹ï¼Œä¼šä½¿ç”¨ä¸€ä¸ªå¾ˆå¤§çš„å¾ªç¯é‡å¤é‡‡æ ·çº¹ç†ï¼Œç™¾åˆ†ä¹‹å››ç‚¹ä¹çš„æ•™ç¨‹ï¼Œä¼šä½¿ç”¨å¤špassçš„æ–¹æ³•å‡å°‘é‡‡æ ·çš„æ¬¡æ•°ï¼ˆå½“ç„¶è¿™äº›æ•°å­—æ˜¯æˆ‘çç¼–çš„ï¼Œæˆ‘è¿˜ç•™äº†ç™¾åˆ†ä¹‹é›¶ç‚¹ä¸€ï¼Œä»¥é˜²çœŸçš„æœ‰äººä¹Ÿç”¨Compute Shaderåšäº†å¾„å‘æ¨¡ç³Šï¼‰ã€‚è¿™ç¯‡æ–‡ç« å°±æ¥æ¢è®¨å¦‚ä½•ä½¿ç”¨Compute Shaderä¸­çš„Group Shared Memoryæ¥åŠ é€Ÿå¾„å‘æ¨¡ç³Šçš„è®¡ç®—ã€‚æˆ‘ä»¬çš„ç›®æ ‡æ˜¯åœ¨ä¸€ä¸ªCompute Shaderä¸­å®ç°è¶…å¤§æ¨¡ç³Šè·ç¦»(ç”šè‡³èƒ½è¶…è¿‡128åƒç´ )çš„å¾„å‘æ¨¡ç³Šã€‚
ç¼“å­˜é¢œè‰²ä¿¡æ¯ ç…§ä¾‹æˆ‘ä»¬è¦å†çœ‹ä¸€éç´¢å°¼çš„Bend Studioçš„Graham Aldridgeåœ¨Sigraph 2023çš„ç´¢å°¼åˆ›ä½œè€…å¤§ä¼šä¸Šï¼Œä»‹ç»çš„å¾€æ—¥ä¸å†ï¼ˆDays Goneï¼‰ä¸­è®¡ç®—å±å¹•ç©ºé—´æ¥è§¦é˜´å½±çš„æ–¹å¼ï¼Œè¿™é‡Œå¯ä»¥æ‰¾åˆ°æ¼”ç¤ºæ–‡ç¨¿å’Œå‚è€ƒä»£ç ã€‚æ¼”ç¤ºæ–‡ç¨¿çš„ç¬¬24-25é¡µä»‹ç»äº†å¦‚ä½•åœ¨Group Shared Memoryä¸­ç¼“å­˜æ·±åº¦ä¿¡æ¯ï¼Œå½“ç„¶åœ¨å¾„å‘æ¨¡ç³Šä¸­æˆ‘ä»¬ç¼“å­˜çš„æ˜¯é¢œè‰²ä¿¡æ¯äº†ã€‚
ä¸‹å›¾æ˜¯ç¼“å­˜é¢œè‰²ä¿¡æ¯çš„ç¤ºæ„å›¾ï¼Œç»¿è‰²æ–¹å—å¯¹åº”çš„åƒç´ æ˜¯æˆ‘ä»¬æ•´ä¸ªThread Groupçš„èµ·ç‚¹ï¼Œçº¢è‰²æ–¹å—æ˜¯æˆ‘ä»¬å½“å‰è®¡ç®—çš„åƒç´ ï¼Œé»‘è‰²å’Œç°è‰²çš„çº¿ä»£è¡¨äº†è¯¥åƒç´ åˆ°å¾„å‘æ¨¡ç³Šä¸­å¿ƒçš„æ–¹å‘ã€‚æˆ‘ä»¬çš„Thread Group Sizeæ˜¯12ï¼Œæ·±è“è‰²ï¼ˆåŒ…æ‹¬ç»¿è‰²å’Œçº¢è‰²ï¼‰çš„åƒç´ åŒå±äºä¸€ä¸ªThread Groupï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—è¿™äº›åƒç´ å¾„å‘æ¨¡ç³Šåçš„é¢œè‰²ã€‚æ·±è“è‰²ã€æµ…è“è‰²ã€ç°è‰²å’Œæµ…ç°è‰²ã€é•‚ç©ºçš„ç°è‰²å’Œæµ…ç°è‰²ï¼Œä»£è¡¨äº†æˆ‘ä»¬éœ€è¦ç¼“å­˜çš„é¢œè‰²ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦å¯¹ç¼“å­˜çš„é¢œè‰²è¿›è¡ŒåŒçº¿æ€§æ’å€¼ï¼Œæˆ‘ä»¬é™¤äº†éœ€è¦ç¼“å­˜å°„çº¿ç»è¿‡çš„æœ€è¿‘çš„åƒç´ ï¼ˆå³è“è‰²åŒºåŸŸï¼‰å¤–ï¼Œè¿˜éœ€è¦ç¼“å­˜å°„çº¿ç»è¿‡çš„ç¬¬äºŒè¿‘çš„åƒç´ ï¼ˆå³ç°è‰²åŒºåŸŸï¼‰å’Œå°„çº¿ç»è¿‡çš„ç¬¬ä¸‰è¿‘çš„åƒç´ ï¼ˆå³é•‚ç©ºç°è‰²åŒºåŸŸï¼‰ã€‚ä¹Ÿå°±æ˜¯è¯´å½“Thread Group Sizeä¸º12æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç¼“å­˜6 * 12ä¸ªåƒç´ ï¼Œäº¦å³æ¯ä¸ªåƒç´ å…­æ¬¡é‡‡æ ·ã€‚
ä»…ç¼“å­˜ç¬¬äºŒè¿‘çš„åƒç´ åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹èƒ½å¤Ÿå¾—åˆ°æ­£ç¡®çš„åŒçº¿æ€§æ’å€¼ï¼Œä½†æ˜¯æ³¨æ„çœ‹çº¢è‰²æ–¹å—å‘å³çš„ç¬¬äºŒæ¬¡é‡‡æ ·ï¼Œä»…å¯¹è“è‰²å’Œå®å¿ƒç°è‰²åŒºåŸŸçš„é¢œè‰²è¿›è¡Œæ’å€¼æ˜¯ä¸èƒ½å¾—åˆ°æ­£ç¡®çš„é¢œè‰²çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é¢å¤–ç¼“å­˜é•‚ç©ºç°è‰²åŒºåŸŸçš„é¢œè‰²ï¼Œäº¦å³ç¬¬ä¸‰è¿‘çš„åƒç´ ã€‚
Group Shared Memoryåˆ†é… å¦‚ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬çš„Group Shared Memoryçš„å¤§å°æ˜¯THREAD_COUNT * 6ï¼ˆæ‡’å¾—æŠŠTHREAD_COUNTç»Ÿä¸€æ”¹æˆTHREAD_GROUP_SIZEäº†ï¼‰ï¼Œå…¶ä¸­åŒ…å«äº†ä¸Šè¿°çš„æ·±è“è‰²ã€æµ…è“è‰²ã€ç°è‰²ã€æµ…ç°è‰²ã€é•‚ç©ºç°è‰²ã€é•‚ç©ºæµ…ç°è‰²åŒºåŸŸå¯¹åº”åƒç´ çš„é¢œè‰²ä¿¡æ¯ã€‚æ•°ç»„çš„é•¿åº¦æ˜¯THREAD_COUNT * 6ï¼Œåœ¨æˆ‘ä»¬ç¼“å­˜æ—¶ï¼Œæˆ‘ä»¬ä¼šå°†å…¶è§†ä¸º6è¡ŒTHREAD_COUNTåˆ—çš„è¡¨æ¥å‚¨å­˜é¢œè‰²ä¿¡æ¯ï¼Œè€Œåœ¨æˆ‘ä»¬è¯»å–æ—¶ï¼Œæˆ‘ä»¬ä¼šå°†å…¶è§†ä¸º3è¡ŒTHREAD_COUNT*2åˆ—çš„è¡¨æ¥è¯»å–æ•°æ®ã€‚
groupshared float3 cachedColor[THREAD_COUNT * 6]; void SetCachedColor(float3 color, int2 threadPos) {cachedColor[threadPos.x+threadPos.y*THREAD_COUNT]=color;} float3 GetCachedColor(int2 threadPos) {return cachedColor[threadPos.x+threadPos.y*THREAD_COUNT*2];} å…·ä½“çš„ä»£ç  RadialDispatchComputeShader.compute æ ¸å¿ƒçš„ä»£ç æ¥è‡ªäºä¸Šä¸€ç¯‡æ–‡ç« å¾„å‘åˆ†æ´¾Compute Shaderã€‚å¾ªç¯è¯»å–é¢œè‰²å€¼çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œå¯ä»¥ä¸¥æ ¼æŒ‰ç…§æ ¼ç‚¹æ¥è¯»å–ï¼Œè¿™æ ·åªéœ€è¦å¯¹yæ–¹å‘åšçº¿æ€§æ’å€¼ï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§ç»Ÿä¸€çš„æ­¥é•¿æ¥è¯»å–ï¼Œè¿™æ ·éœ€è¦å¯¹xyæ–¹å‘éƒ½åšçº¿æ€§æ’å€¼ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯ç»Ÿä¸€çš„æ­¥é•¿ã€‚æ¯ä¸€ç»„ç¼“å­˜çš„èµ·å§‹åƒç´ æ˜¯æœ€æ¥è¿‘äºå°„çº¿çš„åƒç´ çš„ä¸‹é¢ä¸€ä¸ªåƒç´ ï¼Œè¯»å–ç¼“å­˜ä½¿ç”¨çš„åç§»æ˜¯ç”¨çš„å½“å‰é‡‡æ ·ç‚¹ä¸‹ç¬¬ä¸€ä¸ªåƒç´ çš„åæ ‡å’Œå½“å‰ç¼“å­˜åˆ—æœ€ä¸‹é¢åƒç´ çš„åæ ‡ç›¸å‡ï¼Œè¿™é‡Œé¢æ¯”è¾ƒç»•ä¸å¤ªå¥½æè¿°ã€‚ã€‚ã€‚
#pragma kernel RadialBlurMain // #pragma warning(disable: 3556) #define THREAD_COUNT 128 Texture2D&lt;float4> _ColorTex; RWTexture2D&lt;float4> _RW_TargetTex; float2 _CenterPosSS; float4 _TextureSize; float _Intensity; struct DispatchParams { int2 offset; int count; int stride; int xMajor; }; StructuredBuffer&lt;DispatchParams> _DispatchData; int GetDispatchType(int index, out int dispatchIndex, out DispatchParams dispatchParams) { for (int i=0; i&lt;8; ++i) { dispatchParams = _DispatchData[i]; dispatchIndex = dispatchParams....</p></div><footer class=entry-footer><span title='2024-03-31 12:00:00 +0800 CST'>March 31, 2024</span>&nbsp;Â·&nbsp;zznewclear13</footer><a class=entry-link aria-label="post link to ä½¿ç”¨Group Shared MemoryåŠ é€Ÿå¾„å‘æ¨¡ç³Š" href=https://zznewclear13.github.io/posts/accelerate-radial-blur-using-group-shared-memory/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://zznewclear13.github.io/posts/images/HighQualityBloom.png alt="High Quality Bloom Cover"></figure><header class=entry-header><h2 class=entry-hint-parent>Unityçš„é«˜è´¨é‡çš„Bloomæ•ˆæœ</h2></header><div class=entry-content><p>Bloomè¾‰å…‰æ•ˆæœ ä¸€ç›´éƒ½æƒ³åšä¸€ä¸ªBloomæ•ˆæœï¼ŒBloomæ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„æ•ˆæœï¼Œå‡ ä¹æ‰€æœ‰ä»‹ç»åå¤„ç†çš„æ•™ç¨‹é‡Œéƒ½ä¼šæåˆ°Bloomæ•ˆæœçš„åˆ¶ä½œï¼Œä½†æ˜¯Bloomåˆæ˜¯ä¸€ä¸ªä¸é‚£ä¹ˆç®€å•çš„æ•ˆæœï¼Œå¤§éƒ¨åˆ†æ•™ç¨‹åˆ¶ä½œå‡ºæ¥çš„Bloomçœ‹ä¸Šå»éƒ½ä¸å¤ªå¥½çœ‹ã€‚
æƒ³è¦åšå¥½Bloomï¼Œé¦–å…ˆå¾—è®¤è¯†åˆ°ä»€ä¹ˆæ˜¯Bloomæ•ˆæœã€‚Bloomæ˜¯ç”±äºé€é•œä¸èƒ½å®Œç¾åœ°è®©å…‰çº¿èšç„¦ä¸åŒä¸€ç‚¹è€Œå¯¼è‡´å›¾åƒä¸Šçš„é«˜äº®åŒºåŸŸçš„é¢œè‰²å‘å‘¨å›´æº¢å‡ºçš„æ•ˆæœï¼Œå’Œä½“ç§¯é›¾è¿™æ ·çš„ç”±äºå¤šæ¬¡æ•£å°„å’ŒæŠ˜å°„å½¢æˆçš„æº¢å‡ºæ•ˆæœåœ¨åŸç†ä¸Šå°±ä¸ç›¸åŒã€‚åœ¨è®¡ç®—æœºå›¾å½¢å­¦é‡Œå¾€å¾€ä½¿ç”¨å¤šæ¬¡æ¨¡ç³Šçš„æ–¹å¼æ¥è¡¨ç°è¿™ç§æ•ˆæœã€‚
è€Œåœ¨è®¨è®ºä»€ä¹ˆæ˜¯å¥½çš„Bloomä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å·®çš„Bloomçš„æ•ˆæœã€‚Matthew Gallantåœ¨ä»–çš„æ–‡ç« Bloom Disastersä¸­å°±ç»™å‡ºäº†å¾ˆå¤šå½“æ—¶çš„æç³Ÿç³•çš„Bloomæ•ˆæœçš„ä¾‹å­ã€‚å¯ä»¥çœ‹åˆ°Bloomå¾ˆé‡è¦çš„ä¸€ç‚¹æ˜¯ï¼ŒBloomä¹‹å‰çš„ç”»é¢å¿…é¡»è¦æ˜¯HDRçš„ç”»é¢ï¼Œå¦‚æœæ•´ä¸ªç”»é¢è¢«é™åˆ¶åœ¨01ä¹‹é—´ï¼Œé‚£ä¹ˆç™½è‰²çš„Tæ¤å’Œç‰¹åˆ«äº®ä»¥è‡³äºçœ‹ä¸Šå»æ˜¯ç™½è‰²çš„å¤ªé˜³å¸¦æ¥çš„Bloomæ•ˆæœå°±ä¼šç›¸åŒã€‚åœ¨LearnOpenGLä¸Šæœ‰é‚£ä¹ˆä¸€ç¯‡æ–‡ç« ï¼Œå…¶ä¸­è¯´åˆ°ï¼Œä¸ºäº†æ¨¡æ‹Ÿæˆ‘ä»¬çœ¼ç›çš„å·¥ä½œåŸç†ï¼Œæˆ‘ä»¬ä¸å¯¹é¢œè‰²è¿›è¡Œé˜ˆå€¼é™åˆ¶ï¼Œè€Œæ˜¯ç›´æ¥å¯¹HDRç”»é¢è¿›è¡Œæ¨¡ç³Šå†å’ŒåŸHDRç”»é¢è¿›è¡Œæ’å€¼ã€‚æˆ‘è®¤ä¸ºè¿™æ˜¯ä¸€ç§ååˆ†é”™è¯¯çš„æ–¹å¼ã€‚æœ€åˆç†çš„æ–¹å¼åº”å½“æ˜¯ï¼Œç”»é¢ä¸Šçš„æ¯ä¸ªé¢œè‰²ç¡®å®ä¼šå‘å‘¨å›´æº¢å‡ºè‡ªå·±çš„é¢œè‰²ï¼Œä½†æ˜¯æ›´äº®çš„é¢œè‰²çš„æº¢å‡ºåŠå¾„ä¼šæ›´å¤§ï¼Œå¯¹äºè¾ƒæš—çš„é¢œè‰²ï¼Œç”±äºæº¢å‡ºåŠå¾„å°äºåŠä¸ªåƒç´ å®½ï¼Œåœ¨æœ€åçš„ç”»é¢ä¸­å°±çœ‹ä¸åˆ°é¢œè‰²çš„æº¢å‡ºäº†ã€‚ä½†æ˜¯æ ¹æ®æ˜åº¦æ¥æ§åˆ¶æº¢å‡ºçš„åŠå¾„æ˜¯ä¸€ä»¶å¾ˆå¤æ‚çš„äº‹æƒ…ï¼ˆè¿™å’Œæ™¯æ·±çš„åŸç†æ˜¯ä¸€æ ·çš„ï¼Œæ‰€ä»¥æˆ‘åˆ°ç°åœ¨éƒ½æ²¡æœ‰æŒæ¡ä¸€ä¸ªå¾ˆå¥½çš„æ™¯æ·±çš„ç®—æ³•ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬åœ¨è®¡ç®—çš„æ—¶å€™é€šè¿‡ä»…æ¨¡ç³Šè¶…å‡ºé˜ˆå€¼çš„é¢œè‰²æ¥æ¨¡æ‹Ÿè¿™ç§æ•ˆæœã€‚æ¨¡ç³ŠåŠå¾„ä¹Ÿæ˜¯ä¸€ä¸ªå†³å®šBloomè´¨é‡çš„å…³é”®è¦ç´ ï¼Œå¦‚æœæ¨¡ç³Šçš„åŠå¾„æ¯”è¾ƒå°ï¼Œçœ‹ä¸Šå»å°±åƒé«˜å…‰å¥—äº†ä¸€ä¸ªç¨å¼±çš„åœˆä¸€æ ·ï¼Œä¸å¤Ÿç¾è§‚ã€‚
Jorge Jimenezåœ¨2014å¹´Siggraphå¤šçš„Advances in Real-Time Renderingè¯¾ç¨‹ä¸Šä»‹ç»äº†ä»–ä¸ºä½¿å‘½å¬å”¤ç°ä»£æˆ˜äº‰æ‰€åšçš„æ¬¡ä¸–ä»£åå¤„ç†æ•ˆæœã€‚ä»–çš„PPTé‡Œä»‹ç»äº†ä½¿å‘½å¬å”¤ç°ä»£æˆ˜äº‰ä¸­è¿åŠ¨æ¨¡ç³Šã€æ•£æ™¯ã€æ¬¡è¡¨é¢æ•£å°„ã€Bloomå’Œé˜´å½±é‡‡æ ·çš„åšæ³•ï¼Œååˆ†å€¼å¾—ä¸€çœ‹ã€‚æœ¬æ–‡åœ¨æ•´ä½“çš„ç®—æ³•ä¸Šå°±ä½¿ç”¨äº†ä»–ä»‹ç»çš„æ–¹æ³•ï¼Œè€Œé‡‡æ ·åˆ™ä½¿ç”¨äº†Dual Kawase Blurçš„ç®—æ³•ï¼Œå¯ä»¥çœ‹æˆ‘ä¹‹å‰çš„æ–‡ç« ã€‚
Bloomçš„ç®—æ³• ä¸»æµçš„Bloomç®—æ³•éƒ½ä¼šä½¿ç”¨ä¸€ä¸ªé˜ˆå€¼ï¼Œç¬¬ä¸€ä¸ªPassæå–å‡ºå¤§äºè¿™ä¸ªé˜ˆå€¼çš„é¢œè‰²ï¼ˆä½¿ç”¨å‡æ³•ï¼Œè¿™æ ·èƒ½å¤Ÿå’Œå°äºé˜ˆå€¼çš„é¢œè‰²å½¢æˆè‡ªç„¶çš„è¿‡æ¸¡ï¼‰ï¼Œç„¶åè¿›è¡Œä¸€ç³»åˆ—çš„é™é‡‡æ ·å‡é‡‡æ ·ä»¥å‡å°‘é‡‡æ ·çš„æ¬¡æ•°ï¼Œæœ€åå°†ä¹‹å‰æ‰€æœ‰çš„å‡é‡‡æ ·çš„æ¨¡ç³Šç»“æœï¼ˆå°±ç›¸å½“äºæ˜¯Mipçš„æ¯ä¸€çº§ï¼‰å åŠ åˆ°ä¸€å¼€å§‹çš„é¢œè‰²ä¸Šã€‚ä¸ºäº†å‡å°‘æœ€åä¸€æ­¥é‡‡æ ·æ‰€æœ‰çš„Mipç­‰çº§å¸¦æ¥çš„æ¶ˆè€—ï¼Œæ ¹æ®Jorge Jimenezçš„åšæ³•ï¼Œæˆ‘ä»¬ä¼šåœ¨æ¯ä¸€æ­¥å‡é‡‡æ ·æ—¶å åŠ å½“å‰Mipçš„é¢œè‰²ã€‚ä½†æ˜¯æœ€åå åŠ ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¤„ç†æ–¹æ³•ï¼Œç”±äºå åŠ äº†å„ä¸ªMipçš„é¢œè‰²ï¼Œä¼šå¯¼è‡´åŸæ¥é«˜å…‰çš„åŒºåŸŸçš„äº®åº¦ä¼šè¢«æé«˜åˆ°åŸæ¥çš„ä¸¤å€ç”šè‡³æ›´å¤šï¼Œä¸è¿‡æˆ‘ä»¬ä¹‹åçš„Tone Mappingèƒ½å¤Ÿä¸€å®šç¨‹åº¦ä¸Šç¼“è§£è¿™ä¸ªé—®é¢˜ã€‚ç„¶åæ˜¯å¯¹å¾®å°çš„é«˜äº®ç‰©ä½“çš„å¤„ç†ï¼ŒJorge Jimenezä½¿ç”¨äº†1/(1 + Luma)çš„æ–¹å¼è¿›è¡ŒåŠ æƒå¤„ç†ï¼Œä¸è¿‡å¦‚æœæˆ‘ä»¬å°†Bloomç§»åŠ¨åˆ°TAAä¹‹åï¼Œè¿™ä¸ªé—®é¢˜èƒ½å¤Ÿå¾ˆå¥½çš„è§£å†³æ‰ã€‚è‡³äºæ¨¡ç³Šï¼Œåœ¨æˆ‘ä¹‹å‰é‚£ä¹ˆå¤šæ–‡ç« çš„é“ºå«ä¸‹ï¼Œä¹Ÿå°±ä¸æ˜¯ä»€ä¹ˆéš¾ç‚¹äº†ã€‚
æˆ‘è‡ªå·±åœ¨å®ç°çš„æ—¶å€™ï¼Œä¼šåœ¨æœ€åä¸€æ­¥å åŠ Mipåˆ°æœ€ä¸€å¼€å§‹çš„å›¾åƒæ—¶ï¼Œå°†æ¨¡ç³Šåçš„é¢œè‰²é™¤ä»¥æ‰€æœ‰çš„é™é‡‡æ ·æ¬¡æ•°ï¼Œè¿™æ ·èƒ½å¤Ÿç¨å¾®å¼¥è¡¥ä¸€ä¸‹å¤šä¸ªMipå¸¦æ¥çš„äº®åº¦å‰§çƒˆå¢åŠ çš„é—®é¢˜ã€‚äº‹å®ä¸Šæˆ‘ä¹Ÿæƒ³è¿‡å°†å› ä¸ºé˜ˆå€¼è€Œä¸¢å¤±çš„äº®åº¦å‚¨å­˜åœ¨é€æ˜é€šé“é‡Œï¼Œå’Œé¢œè‰²ä¸€èµ·å‚ä¸æ¨¡ç³Šï¼Œåœ¨æœ€åçš„æ—¶å€™åŠ å›ä¹‹å‰ä¸¢å¤±çš„äº®åº¦ï¼Œæœ€åå’ŒåŸå§‹é¢œè‰²çº¿æ€§æ’å€¼ï¼Œä¸è¿‡ä¼¼ä¹ä¸é‚£ä¹ˆå¥½åšã€‚
è¿™é‡Œå¯ä»¥å¯¹æ¯”ä¸€ä¸‹Unityè‡ªå¸¦çš„Bloomå’Œæˆ‘çš„Bloomä¹‹é—´çš„æ•ˆæœå·®å¼‚ã€‚Unityç¬¬ä¸€ä¸ªPassé¢„è¿‡æ»¤ä¼šè¿›è¡Œ13æ¬¡é‡‡æ ·ï¼Œä¹‹åæ¯ä¸€æ¬¡é™é‡‡æ ·åˆ†æˆæ¨ªç«–ä¸¤ä¸ªæ–¹å‘ï¼Œæ¨ªå‘9æ¬¡é‡‡æ ·ï¼Œç«–å‘5æ¬¡é‡‡æ ·ï¼Œå‡é‡‡æ ·åˆ™æ˜¯åœ¨2æ¬¡é‡‡æ ·ä¸­çº¿æ€§æ’å€¼ã€‚æˆ‘çš„åˆ™æ˜¯æ¯æ¬¡é™é‡‡æ ·è¿›è¡Œ5æ¬¡é‡‡æ ·ï¼Œæ¯æ¬¡å‡é‡‡æ ·è¿›è¡Œ8+1æ¬¡é‡‡æ ·ï¼Œä¸éœ€è¦åˆ†æ¨ªç«–é‡‡æ ·ã€‚ä¸‹å›¾ä¸Šè¾¹æ˜¯Unityè‡ªå¸¦çš„Bloomï¼Œä¸‹è¾¹æ˜¯æˆ‘çš„Bloomï¼Œæœ€åå‡ä½¿ç”¨Aces Tonemappingï¼Œåœºæ™¯é‡Œçš„å¤§ç«‹æ–¹ä½“çš„å¤§å°æ˜¯ç›¸é‚»å°ç«‹æ–¹ä½“çš„1.5å€ï¼Œè€Œå°ç«‹æ–¹ä½“çš„äº®åº¦æ˜¯ç›¸é‚»å¤§ç«‹æ–¹ä½“çš„1.5å€ã€‚æˆ‘å°½é‡åœ°å°†å‚æ•°è°ƒçš„å·®ä¸å¤šï¼ŒUnityä¸€å…±22ä¸ªDrawæœ€é«˜Mipä¸º7ï¼Œæˆ‘çš„ä¸€å…±17ä¸ªDrawæœ€é«˜Mipä¸º8ï¼Œå¯ä»¥è§‚å¯Ÿåˆ°Unityçš„ä¼šæœ‰ç¨å¾®æ˜æ˜¾ä¸€ç‚¹çš„Bandingï¼Œä¸­é—´äº®åº¦çš„ä¸­é—´å¤§å°çš„ç‰©ä½“å¸¦æ¥çš„Bloomæ¯”æˆ‘çš„ç¨å¾®å¤§ä¸€äº›ã€‚
Unity Default Bloom
My High Quality Bloom
Bloomçš„å…·ä½“å®ç° HQBloomComputeShader.compute è¿™é‡Œæœ‰å››ä¸ªKernelï¼ŒHQBloomWeightedDownsampleç”¨äºç¬¬ä¸€æ¬¡é™é‡‡æ ·æ—¶å‡å»é˜ˆå€¼å¹¶åŠ æƒè¿›è¡Œæ¨¡ç³Šï¼ŒHQBloomDownsampleæ˜¯å’ŒDual Kawase Blurä¸€æ ·çš„é™é‡‡æ ·çš„æ¨¡ç³Šï¼ŒHQBloomAdditiveUpsampleæ˜¯åœ¨Dual Kawase Blurçš„å‡é‡‡æ ·çš„åŸºç¡€ä¸Šå’Œä½ä¸€çº§çš„Mipå åŠ ï¼ŒHQBloomCompositeåˆ™æ˜¯å°†æœ€ä½ä¸€çº§Mipå’ŒåŸå§‹é¢œè‰²è¿›è¡Œæ··åˆã€‚
#pragma kernel HQBloomDownsample #pragma kernel HQBloomWeightedDownsample #pragma kernel HQBloomAdditiveUpsample #pragma kernel HQBloomComposite #include "Packages/com.unity.render-pipelines.core/ShaderLibrary/Common.hlsl" #include "Packages/com.unity.render-pipelines.core/ShaderLibrary/Color.hlsl" #include "Packages/com.unity.render-pipelines.universal/ShaderLibrary/Core.hlsl" Texture2D&lt;float4> _SourceTexture; Texture2D&lt;float4> _ColorTexture; RWTexture2D&lt;float4> _RW_TargetTexture; SamplerState sampler_LinearClamp; float4 _SourceSize; float4 _TargetSize; float _Threshold; float _InvDownsampleCount; float _BloomIntensity; float3 applyThreshold(float3 color, out float luma) { luma = Luminance(color); return color * max(0....</p></div><footer class=entry-footer><span title='2023-07-22 12:00:00 +0800 CST'>July 22, 2023</span>&nbsp;Â·&nbsp;zznewclear13</footer><a class=entry-link aria-label="post link to Unityçš„é«˜è´¨é‡çš„Bloomæ•ˆæœ" href=https://zznewclear13.github.io/posts/unity-high-quality-bloom/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://zznewclear13.github.io/posts/images/DualKawaseBlur.png alt="Dual Kawase Blur Cover"></figure><header class=entry-header><h2 class=entry-hint-parent>å‡ ä¹è¿ç»­çš„åŒKawaseæ¨¡ç³Š</h2></header><div class=entry-content><p>2023å¹´6æœˆ3æ—¥ä¿®è®¢ å‘ç°è¿˜æ˜¯åœ¨é™é‡‡æ ·å‡é‡‡æ ·åè¿›è¡Œçº¿æ€§æ’å€¼æ¥è·å–ä¸­é—´ç¨‹åº¦çš„æ¨¡ç³Šæ•ˆæœæ¯”è¾ƒå¥½ï¼Œæ‰€ä»¥åé¢çš„ä»£ç ä¹Ÿéƒ½æ”¹è¿‡æ¥äº†ï¼Œä¸è¿‡ç†è®ºä¸Šçš„éƒ¨åˆ†å€’æ˜¯æ²¡å¿…è¦æ”¹ã€‚é¡ºä¾¿ä¹ŸèŠ±äº†ç‚¹æ—¶é—´å†™äº†ä¸€ä¸ªShadertoyä½œä¸ºæ¼”ç¤ºï¼š
Dual Kawase Blur
å†™è¿™ç¯‡æ–‡ç« çš„åŸå›  ç½‘ä¸Šå·²ç»æœ‰äº†å¾ˆå¤šå¾ˆå¤šçš„åŒKawaseæ¨¡ç³Šçš„ç°æˆçš„æ¡ˆä¾‹ï¼Œä½†æ˜¯å­˜åœ¨ä»¥ä¸‹å‡ ä¸ªé—®é¢˜ï¼š1. ç»å¤§éƒ¨åˆ†çš„æ–‡ç« éƒ½åªç»™äº†ä»£ç ï¼Œæ²¡æœ‰ç›¸åº”çš„è§£é‡Šï¼Œè‡³å¤šä¼šç»™ä¸€å¼ ç›´æ¥ä»Armçš„pdfæˆªå–çš„å›¾ç¤ºï¼Œè€Œè¿™å¼ å›¾ç¤ºç”»äº†ä¸€å †æ–¹æ¡†å’Œç¬¦å·ï¼Œå´æ²¡æœ‰è¯´æ˜è¿™äº›å›¾æ¡ˆä»£è¡¨çš„å«ä¹‰ã€‚2. ç»å¤§éƒ¨åˆ†çš„æ–‡ç« é€šè¿‡ä¿®æ”¹é‡‡æ ·çš„è·ç¦»æ¥æ§åˆ¶æ¨¡ç³Šçš„ç¨‹åº¦ï¼Œè¿™ä¸ªçš„ç¼ºç‚¹æˆ‘ä»¬åç»­å†è°ˆã€‚3. ç»å¤§éƒ¨åˆ†çš„æ–‡ç« å¹¶æ²¡æœ‰è€ƒè™‘æ¨¡ç³Šç¨‹åº¦ä»0å¼€å§‹é€æ¸å¢å¤§çš„åŠ¨æ€è¿‡ç¨‹ï¼Œä½¿ç”¨é™é‡‡æ ·å’Œå‡é‡‡æ ·å¾€å¾€ä¼šç ´åæ•´ä¸ªç”»é¢çš„è¿ç»­æ€§ã€‚
å¦‚æœåªæ˜¯æƒ³è¦è·å¾—ä¸€ä¸ªæ¨¡ç³Šçš„ç”»é¢ï¼Œåªéœ€è¦åšå‡ æ¬¡é™é‡‡æ ·å’Œå‡é‡‡æ ·å°±èƒ½å®Œæˆäº†ï¼Œä½†æˆ‘å¸Œæœ›èƒ½æœ‰ä¸€ä¸ªè¿ç»­åœ°é€æ¸åœ°å˜æ¨¡ç³Šçš„è¿‡ç¨‹ï¼Œå› æ­¤æˆ‘å¼€å§‹äº†é‡åŒ–åŒKawaseæ¨¡ç³Šçš„æƒ³æ³•ã€‚
åŒKawaseæ¨¡ç³Š(Dual Kawase Blur) åŒKawaseæ¨¡ç³Šæ˜¯2015å¹´Armåœ¨Kawaseæ¨¡ç³Šçš„åŸºç¡€ä¸Šæå‡ºçš„ä¸€ç§é€šè¿‡é™é‡‡æ ·å’Œå‡é‡‡æ ·æ¥å¿«é€Ÿä¸”é«˜æ•ˆåœ°è¿›è¡Œé«˜è´¨é‡å¤§åŠå¾„æ¨¡ç³Šçš„ä¸€ç§æ–¹æ³•ï¼Œå…·ä½“çš„pdfå¯ä»¥ä»è¿™é‡Œæ‰¾åˆ°ã€‚
è¿™é‡Œæ˜¯ä¸€å¼ åŒKawaseæ¨¡ç³Šçš„å›¾ç¤ºï¼Œè¡¨ç¤ºäº†åŒKawaseæ¨¡ç³Šåœ¨é™é‡‡æ ·å’Œå‡é‡‡æ ·æ—¶çš„æ“ä½œã€‚ç»†çš„é»‘çº¿å¯¹åº”çš„æ ¼å­æ˜¯åŸå§‹çš„åƒç´ ï¼ˆæˆ–æ˜¯å‡é‡‡æ ·åçš„åƒç´ ï¼‰ï¼Œç²—çš„é»‘çº¿å¯¹åº”çš„æ ¼å­æ˜¯é™é‡‡æ ·åçš„åƒç´ ã€‚å‰å¯¹åº”çš„æ˜¯å½“å‰æ¨¡ç³Šçš„åƒç´ ï¼Œåœ†å¯¹åº”çš„æ˜¯å½“å‰æ¨¡ç³Šçš„åƒç´ æ‰€éœ€è¦é‡‡æ ·ç‚¹ã€‚ç²‰è‰²å¯¹åº”çš„æ˜¯é™é‡‡æ ·æ—¶çš„æ¨¡ç³Šçš„åƒç´ å’Œé‡‡æ ·ç‚¹ï¼Œç»¿è‰²å¯¹åº”çš„æ˜¯å‡é‡‡æ ·æ—¶çš„æ¨¡ç³Šçš„åƒç´ å’Œé‡‡æ ·ç‚¹ã€‚
ä»è¿™å¼ å›¾ä¸­ä¹Ÿå¯ä»¥çœ‹åˆ°åŒKawaseæ¨¡ç³Šåˆ©ç”¨åŒçº¿æ€§é‡‡æ ·æ¥èŠ‚çœé‡‡æ ·æ•°çš„æ“ä½œã€‚åœ¨é™é‡‡æ ·æ—¶å®é™…é‡‡æ ·äº†å½“å‰åƒç´ å‘¨å›´ä¸€å…±åå…­ä¸ªåƒç´ çš„é¢œè‰²ï¼›åœ¨å‡é‡‡æ ·æ—¶å®é™…é‡‡æ ·äº†å½“å‰åƒç´ å‘¨å›´ä¸€å…±åä¸‰ä¸ªåƒç´ çš„é¢œè‰²ã€‚è€Œå¦‚æœåœ¨åšé™é‡‡æ ·æ—¶ï¼Œå¯¹äºå¥‡æ•°ä¸ªåƒç´ é™¤ä»¥äºŒå‘ä¸‹å–æ•´ï¼Œæˆ–è€…æ˜¯åœ¨é™é‡‡æ ·æ—¶ä½¿ç”¨äº†ä¸æ°å½“çš„åç§»ï¼ˆæ¯”å¦‚1.5å€çš„åç§»ï¼‰ï¼Œä¼šå¯¼è‡´é™é‡‡æ ·çš„é‡‡æ ·ç‚¹è½åœ¨åŸå§‹åƒç´ çš„ä¸­å¿ƒï¼Œè¿™æ—¶å³ä½¿ä½¿ç”¨äº†åŒçº¿æ€§é‡‡æ ·ï¼Œä¹Ÿåªç­‰ä»·äºé‡‡æ ·ä¸€ä¸ªåƒç´ ã€‚
å› æ­¤ä¸ºäº†è®©æ¯ä¸€ä¸ªåƒç´ éƒ½èƒ½å¯¹æ¨¡ç³Šåšåˆ°åº”ç”¨çš„è´¡çŒ®ï¼Œä¸ºäº†è¾¾åˆ°æ¯”è¾ƒå¥½çš„æ¨¡ç³Šæ•ˆæœï¼Œæˆ‘ä»¬è¿™é‡Œé™åˆ¶åŒKawaseæ¨¡ç³Šçš„é‡‡æ ·åç§»ä¸ºä¸€å€ï¼ˆä¹Ÿå°±æ˜¯ä¸¥æ ¼æŒ‰ç…§é‡‡æ ·ç‚¹è¿›è¡Œæœ€ä¼˜çš„åŒçº¿æ€§é‡‡æ ·ï¼‰ã€‚è€Œé€šè¿‡å¤šæ¬¡é™é‡‡æ ·å’Œå‡é‡‡æ ·è¾¾åˆ°åˆé€‚çš„æ¨¡ç³ŠåŠå¾„ã€‚
é‡åŒ–åŒKawaseæ¨¡ç³Š é™é‡‡æ ·å’Œå‡é‡‡æ ·æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œå°±æ˜¯åªè¦å‘ç”Ÿäº†é™é‡‡æ ·å’Œå‡é‡‡æ ·ï¼Œå°±å¿…ç„¶ä¼šå¸¦æ¥æ¨¡ç³Šã€‚è¿™æ—¶æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯åœ¨åŸå§‹åˆ†è¾¨ç‡ä¸‹é€šè¿‡æ¶ˆè€—æ›´å¤§çš„æ–¹å¼è¿›è¡ŒåŠ æƒæ¨¡ç³Šæ¥é€¼è¿‘åŒKawaseæ¨¡ç³Šé…åˆé™é‡‡æ ·å¸¦æ¥çš„æ¨¡ç³Šï¼›å¦ä¸€ç§æ˜¯åœ¨é›¶æ¬¡å’Œä¸€æ¬¡åŒKawaseä¹‹é—´çº¿æ€§æ’å€¼å¾—åˆ°ä¸€å¼ ä»‹äºä¸¤è€…ä¹‹é—´æ¨¡ç³Šç¨‹åº¦çš„å›¾åƒã€‚ç»¼åˆä¸¤è€…æ¥çœ‹ï¼Œçº¿æ€§æ’å€¼å¾—åˆ°çš„æ•ˆæœæ›´ä¸ºå¹³æ»‘ï¼Œæ•ˆæœä¸Šç¨â€œé”™è¯¯â€ä¸€äº›ï¼Œä½†å®Œå…¨åœ¨å¯æ¥å—çš„èŒƒå›´å†…ã€‚
æˆ‘è¿™è¾¹å†™äº†ä¸€ä¸ªå°å°çš„è„šæœ¬ï¼Œå»è®¡ç®—åŸå§‹åˆ†è¾¨ç‡ä¸‹å€¼ä¸º1çš„åƒç´ ç‚¹ï¼Œåœ¨ç»è¿‡ä¸€æ¬¡åŒKawaseæ¨¡ç³Šåï¼Œå…¶ä»–åƒç´ çš„å€¼ã€‚é€šè¿‡å¤šé¡¹å¼æ‹Ÿåˆè¿™äº›æ¨¡ç³Šåçš„å€¼ï¼Œå°±èƒ½åˆ©ç”¨è¿™äº›å€¼æ¥é€¼è¿‘åŒKawaseæ¨¡ç³Šçš„æ•ˆæœäº†ã€‚æˆ‘è¿™è¾¹å¯¹8x8çš„åƒç´ åšäº†è®¡ç®—ï¼ˆå®é™…ä¸Šæ¨¡ç³Šçš„æ ¸å¿ƒåº”è¯¥æ›´å¤§ä¸€äº›ï¼Œä¸è¿‡æˆ‘æ‡’å¾—æ”¹ä¹‹å‰çš„ä»£ç äº†ï¼‰ã€‚è®¡ç®—å‡ºçš„æƒé‡å¦‚ä¸‹ï¼š
0.0003255208 0.001464844 0.003092448 0.004231771 0.004231771 0.003092448 0.001464844 0.0003255208 0.001464844 0.004882813 0.009440104 0.01204427 0.01074219 0.007486979 0.004231771 0.001464844 0.004394531 0.01334635 0.02311198 0.02701823 0.0218099 0.01334635 0.007486979 0.003092448 0.01009115 0.02571615 0.03808594 0.04329427 0.03678386 0.0218099 0.01074219 0.004231771 0.01529948 0.03222656 0.04069011 0.04589844 0.04329427 0.02701823 0.01204427 0.004231771 0.01416016 0.0296224 0.03678386 0.04069011 0.03808594 0.02311198 0.009440104 0.003092448 0.007324219 0....</p></div><footer class=entry-footer><span title='2023-05-29 12:00:00 +0800 CST'>May 29, 2023</span>&nbsp;Â·&nbsp;zznewclear13</footer><a class=entry-link aria-label="post link to å‡ ä¹è¿ç»­çš„åŒKawaseæ¨¡ç³Š" href=https://zznewclear13.github.io/posts/almost-continuous-dual-kawase-blur/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://zznewclear13.github.io/posts/images/CircularBlur.png alt="Circular Blur Cover"></figure><header class=entry-header><h2 class=entry-hint-parent>Unityä¸¤ä¸ªPassçš„åœ†å½¢æ¨¡ç³Š</h2></header><div class=entry-content><p>åœ†å½¢æ¨¡ç³Š åœ†å½¢æ¨¡ç³Šï¼Œåœ¨Photoshopé‡Œåˆç§°é•œå¤´æ¨¡ç³Š(Lens Blur)ï¼Œå’Œæ™¯æ·±ç»“åˆåœ¨ä¸€èµ·çš„æ—¶å€™è¢«ç§°ä½œæ•£æ™¯(Bokeh)ï¼Œæ˜¯æŒ‡åœ¨æ‘„å½±æ—¶å¤±ç„¦çš„åŒºåŸŸäº§ç”Ÿçš„å’Œå…‰åœˆçš„å½¢çŠ¶ä¸€è‡´çš„æ¨¡ç³Šæ•ˆæœï¼Œäº”è¾¹å½¢å…«è¾¹å½¢æˆ–æ˜¯åœ†å½¢éƒ½æœ‰å¯èƒ½ã€‚
åœ¨è®¡ç®—æœºå›¾å½¢å­¦ä¸­å®ç°æ™¯æ·±æ•ˆæœåŸºæœ¬ä¸Šæœ‰ä¸¤ç§æ–¹æ³•ï¼šç¬¬ä¸€ç§ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ï¼Œé€šè¿‡é»„é‡‘ç‡ç”Ÿæˆä¸€ç³»åˆ—çš„é‡‡æ ·ç‚¹ï¼Œä½¿å¾—å…¶å½¢çŠ¶æ¥è¿‘æƒ³è¦æ¨¡ç³Šçš„å½¢çŠ¶ï¼Œè¿™ç§æ–¹æ³•éœ€è¦å¾ˆå¤šå¾ˆå¤šçš„é‡‡æ ·ç‚¹ï¼ŒåŸºæœ¬ä¸Šæ‰¾åˆ°çš„éƒ½æ˜¯60æ¬¡ä»¥ä¸Šçš„é‡‡æ ·æ¬¡æ•°ï¼Œç”±äºé‡‡æ ·ç‚¹çš„åˆ†å¸ƒä¸ä¸€å®šæ­£å¥½åœ¨åƒç´ ç‚¹ä¸­å¿ƒï¼Œä¹Ÿä¸èƒ½è½»æ˜“åœ°ä½¿ç”¨Group Shared Memoryè¿›è¡Œä¼˜åŒ–ï¼Œäº‹å®ä¸Šå¤§çš„æ¨¡ç³ŠåŠå¾„å¾ˆå¯èƒ½å¯¼è‡´Group Shared Memoryçš„å¤§å°ä¸å¤Ÿï¼›å¦ä¸€ç§æ˜¯é’ˆå¯¹äºç‰¹æ®Šçš„æ¨¡ç³Šå½¢çŠ¶ï¼Œæ¯”å¦‚æ­£å…­è¾¹å½¢ï¼Œå¯ä»¥ä½¿ç”¨ä¸‰æ¬¡ï¼ˆMRTçš„è¯å¯ä»¥è®¤ä¸ºæ˜¯ä¸¤æ¬¡ï¼‰1Dçš„æ¨¡ç³Šæ¥ç»„åˆè€Œæˆï¼Œå¯ä»¥åœ¨Colin BarrÃ©-Briseboisçš„åšå®¢Hexagonal Bokeh Blur Revisitedä¸­çœ‹åˆ°è¯¦ç»†çš„è¯´æ˜ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ä»–æ­¤å‰ä¹Ÿåœ¨EAå·¥ä½œè¿‡ï¼ˆçœ‹æ¥EAæ˜¯çœŸçš„å¾ˆå–œæ¬¢æ•£æ™¯å•Šï¼‰ã€‚
EAçš„æ¸²æŸ“å·¥ç¨‹å¸ˆKleber Garciaåœ¨2018å¹´çš„GDCæ¼”è®²Circular Separable Convolution Depth of Fieldä¸­æåˆ°äº†é€šè¿‡å¤æ•°çš„è¿ç®—æ¥å®ç°åœ†å½¢æ¨¡ç³Šçš„ç®—æ³•ï¼Œå…¶èƒŒåçš„æ•°å­¦æˆ‘è¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ï¼Œæ„Ÿå…´è¶£çš„è¯å¯ä»¥å‚è€ƒCircularly symmetric convolution and lens bluè¿™ç¯‡æ–‡ç« ã€‚åœ†å½¢æ¨¡ç³Šçš„å‚æ•°çš„ç”Ÿæˆçš„ä»£ç å¯ä»¥åœ¨Kleber Garciaçš„å…¬å¼€ä»“åº“é‡Œæ‰¾åˆ°ã€‚Kleber Garciaæœ¬äººä¹Ÿåœ¨Shadertoyä¸Šå†™äº†å…·ä½“çš„åœ†å½¢æ¨¡ç³Šçš„ä»£ç ã€‚
Circular Dof
ç”±äºæ™¯æ·±æ•ˆæœç›¸å¯¹æ¥è¯´æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œå°±åªè€ƒè™‘å¯¹æ•´ä¸ªå±å¹•æ–½åŠ ç›¸åŒç¨‹åº¦çš„åœ†å½¢æ¨¡ç³Šæ•ˆæœã€‚
å…·ä½“çš„å®ç°æ–¹æ³• å…¶å®å¤§éƒ¨åˆ†å’Œä¹‹å‰çš„é«˜æ–¯æ¨¡ç³Šæ²¡æœ‰ä»€ä¹ˆå·®åˆ«ã€‚åœ¨åˆ†ç¦»å·ç§¯åœ†å½¢æ¨¡ç³Šçš„ç®—æ³•ä¸­ï¼Œåœ†å½¢çš„æ•ˆæœæ˜¯é€šè¿‡å¤šä¸ªFilterå åŠ è€Œæˆçš„ï¼Œæ¯ä¸ªFilterå¯¹åº”å®éƒ¨å’Œè™šéƒ¨ä¸¤ä¸ªå‚æ•°ã€‚ä»¥æœ¬æ–‡ä¸ºä¾‹ï¼Œæœ¬æ–‡ä½¿ç”¨äº†ä¸¤ä¸ªFilterï¼Œå¯¹äºä¸€ä¸ªFilterçš„ä¸€ä¸ªé¢œè‰²åˆ†é‡ï¼Œéœ€è¦å‚¨å­˜å®éƒ¨è™šéƒ¨ä¸¤ä¸ªæ•°æ®ï¼Œæ€»ä½“å°±éœ€è¦2x3x2=12ä¸ªé€šé“ï¼Œä½¿ç”¨ä¸‰å¼ R16G16B16A16_SFloatå°±èƒ½å‚¨å­˜æ‰€æœ‰çš„æ•°æ®ã€‚åœ¨Kleber Garciaçš„æ¼”è®²ä¸­ä»–è¿˜æåˆ°äº†ï¼Œå¯ä»¥ä½¿ç”¨bracketçš„æ–¹æ³•ï¼Œå°†é¢œè‰²çš„å·ç§¯æ•°æ®å‚¨å­˜åˆ°å¦ä¸€å¼ å›¾ä¸­ï¼Œè¿™æ ·ä¸­é—´çš„Filterçš„ç»“æœå°±ä¼šè½åœ¨[0, 1]çš„èŒƒå›´å†…ï¼Œå°±èƒ½ä½¿ç”¨R8G8A8B8æ¥å‚¨å­˜äº†ï¼Œå¯ä»¥èŠ‚çœä¸€åŠçš„å¸¦å®½ï¼ˆä½†æ˜¯é¢œè‰²çš„å·ç§¯æ•°æ®ä¸ä¹Ÿè¦ä¸€å¼ 32ä½çš„å›¾å—ï¼Œè¿™é‡Œæˆ‘æ²¡å¤ªæ‡‚ï¼Œæ„Ÿè§‰ä¼˜åŒ–äº†ä½†åˆæ²¡é‚£ä¹ˆä¼˜åŒ–ï¼Œç´¢æ€§å°±æ²¡é‚£ä¹ˆåšï¼‰ã€‚
æ•´ä½“çš„æ“ä½œæ˜¯ï¼š1. é‡‡æ ·æºå›¾ç‰‡ï¼Œå¯¹æ¯ä¸ªFilterå’Œæ¯ä¸ªé¢œè‰²åˆ†é‡è®¡ç®—å®éƒ¨å’Œè™šéƒ¨çš„å€¼ï¼Œæ°´å¹³ç´¯åŠ åå‚¨å­˜åˆ°ä¸­é—´è´´å›¾ä¸­ï¼›2. é‡‡æ ·ä¸­é—´è´´å›¾ï¼Œå¯¹æ¯ä¸ªFilterå’Œæ¯ä¸ªé¢œè‰²åˆ†é‡è®¡ç®—å®éƒ¨å’Œè™šéƒ¨çš„å€¼ï¼Œç«–ç›´ç´¯åŠ åä¹˜ä¸Šå„è‡ªçš„æƒé‡å°±å¾—åˆ°æœ€ç»ˆçš„é¢œè‰²äº†ã€‚ç”±äºæˆ‘æ²¡æœ‰ä½¿ç”¨bracketçš„æ–¹æ³•ï¼ŒFilterä¸­ä¼šæœ‰è´Ÿå€¼å­˜åœ¨ï¼Œåœ¨ä»…ä½¿ç”¨ä¸¤ä¸ªFilterä¸”åŠå¾„è¾ƒå¤§ä¸”åƒç´ é¢œè‰²è¿‡äº®çš„æ—¶å€™ï¼Œç”±äºbandingçš„å­˜åœ¨ä¼šä½¿æœ€ç»ˆçš„é¢œè‰²å‡ºç°è´Ÿå€¼ï¼Œè§£å†³æ–¹æ³•æ˜¯åœ¨è¯»å–é¢œè‰²çš„æ—¶å€™åšä¸€æ¬¡Clampæˆ–è€…æ˜¯ToneMappingåˆ°åˆç†èŒƒå›´ã€‚
CircularBlurFilterGenerator.cs æ”¹å†™è‡ªKleber Garciaçš„å…¬å¼€ä»“åº“ã€‚
/* Copyright 2023 zznewclear13 (zznewclear@gmail.com) Copyright 2016 Kleber A Garcia (kecho_garcia@hotmail.com) Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software....</p></div><footer class=entry-footer><span title='2023-04-09 12:00:00 +0800 CST'>April 9, 2023</span>&nbsp;Â·&nbsp;zznewclear13</footer><a class=entry-link aria-label="post link to Unityä¸¤ä¸ªPassçš„åœ†å½¢æ¨¡ç³Š" href=https://zznewclear13.github.io/posts/unity-two-pass-circular-blur/></a></article><article class="post-entry tag-entry"><figure class=entry-cover><img loading=lazy src=https://zznewclear13.github.io/posts/images/GaussianBlurRevisited.png alt="Gaussian Blur Cover"></figure><header class=entry-header><h2 class=entry-hint-parent>å†è®®é«˜æ–¯æ¨¡ç³Š</h2></header><div class=entry-content><p>å°†è¿‘ä¸¤å¹´ä¹‹åå†å›è¿‡å¤´æ¥åˆ¶ä½œé«˜æ–¯æ¨¡ç³Š è™½ç„¶ä¸¤å¹´å‰å·²ç»å†™è¿‡äº†ä½¿ç”¨Group Shared MemoryåŠ é€Ÿé«˜æ–¯æ¨¡ç³Šè¿™ç¯‡æ–‡ç« äº†ã€‚ä½†å½“æ—¶å†™çš„æ—¶å€™ä»æœ‰ä¸€äº›é—æ†¾çš„åœ°æ–¹ï¼Œç”±äºä½¿ç”¨çš„æ˜¯é•¿åº¦ä¸º17çš„é™æ€çš„é«˜æ–¯æ¨¡ç³Šçš„æ•°ç»„ï¼ˆå®é™…ä¸Šåªæœ‰9ä¸ªæƒé‡ï¼‰ï¼Œè™½ç„¶åœ¨ä¸€å®šç¨‹åº¦ä¸Šèƒ½å¤Ÿè¾¾åˆ°ä»»æ„è°ƒèŠ‚é«˜æ–¯æ¨¡ç³Šçš„ç¨‹åº¦çš„æ•ˆæœï¼Œä½†åœ¨è¾ƒä½ç¨‹åº¦çš„é«˜æ–¯æ¨¡ç³Šæ—¶ï¼Œæ˜¯é€šè¿‡æ‰‹åŠ¨çº¿æ€§æ’å€¼æ‰¾åˆ°åˆé€‚çš„é‡‡æ ·é¢œè‰²ï¼Œä¸”ä¸€å®šä¼šæœ‰17æ¬¡çš„é¢œè‰²å’Œæƒé‡çš„è¿ç®—ï¼›è€Œåœ¨è¾ƒé«˜ç¨‹åº¦çš„é«˜æ–¯æ¨¡ç³Šæ—¶ï¼Œç”±äºä»…æœ‰åä¸ƒä¸ªæœ‰æ•ˆçš„é¢œè‰²ç‚¹ï¼Œä¼šæœ‰æ˜æ˜¾çš„é‡‡æ ·æ¬¡æ•°ä¸è¶³çš„ç‘•ç–µã€‚
è€Œè¿™ä¸¤å¹´ä¹‹é—´æˆ‘ä¹Ÿæ›¾è€ƒè™‘ä½¿ç”¨ä¸åŒçš„æ–¹æ³•æ¥åˆ¶ä½œä¸€ä¸ªæ—¢èƒ½æ»¡è¶³å¾ˆé«˜ç¨‹åº¦çš„é«˜æ–¯æ¨¡ç³Šï¼Œåˆèƒ½å…¼é¡¾å¾ˆå°ç¨‹åº¦çš„é«˜æ–¯æ¨¡ç³Šï¼Œæ€§èƒ½ä¸Šä¹Ÿç›¸å¯¹é«˜æ•ˆï¼Œä¸”ä½¿ç”¨åŒä¸€å¥—é€šç”¨çš„ä»£ç ï¼Œçš„é«˜æ–¯æ¨¡ç³Šæ•ˆæœã€‚ä¸‹é¢ä¾¿æ˜¯æˆ‘ä¹‹å‰åœ¨Shadertoyä¸Šå†™çš„é€šè¿‡éšæœºé‡‡æ ·å’Œå†å²æ··åˆçš„é«˜æ–¯æ¨¡ç³Šæ•ˆæœã€‚
Stochastic Gaussian Blur
ä½†éšæœºå¸¦æ¥çš„å™ªå£°å’Œå†å²æ··åˆå¸¦æ¥çš„é™åˆ¶ï¼Œå†³å®šäº†è¿™ç§æ–¹æ³•ç»ˆç©¶ä¸èƒ½çœŸæ­£åœ°ä½¿ç”¨åœ¨é¡¹ç›®ä¸­ï¼Œäºæ˜¯æˆ‘åˆå¼€å§‹å›åˆ°äº†ä½¿ç”¨Compute Shaderå’ŒGroup Shared Memoryæ¥è®¡ç®—é«˜æ–¯æ¨¡ç³Šæ•ˆæœçš„è€è·¯å­ä¸Šã€‚ä¸åŒçš„æ˜¯ï¼Œè¿™æ¬¡æˆ‘ä½¿ç”¨äº†Compute BufferæŠŠé«˜æ–¯æ¨¡ç³Šçš„å‚æ•°ä¼ ç»™Shaderï¼Œè¿™æ ·å°±èƒ½ç¡®ä¿èŒƒå›´å†…çš„æ¯ä¸€ä¸ªé‡‡æ ·ç‚¹éƒ½èƒ½å¤Ÿå¯¹æœ€åçš„é¢œè‰²äº§ç”Ÿåº”æœ‰çš„è´¡çŒ®ã€‚
æ­£æ€åˆ†å¸ƒ(Normal Distribution) å’Œä¹‹å‰ä¸åŒçš„æ˜¯ï¼Œè¿™æ¬¡æˆ‘ä»¬è¦å…ˆä»æ­£æ€åˆ†å¸ƒå…¥æ‰‹ï¼Œä»æ­£æ€åˆ†å¸ƒçš„ç‰¹æ€§æ¥è€ƒè™‘æˆ‘ä»¬çš„è®¡ç®—æ–¹å¼ã€‚æ­£æ€åˆ†å¸ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°(probability density function)å¦‚ä¸‹æ‰€ç¤ºï¼š $$ f(x) = \frac 1 {\sigma \sqrt{2 \pi}} e^{- \frac 1 2 (\frac {x-\mu} \sigma)^2} $$ ä½¿ç”¨æ­£æ€åˆ†å¸ƒå¯¹ä¿¡å·è¿›è¡Œè¿‡æ»¤ï¼Œè¢«ç§°ä½œé«˜æ–¯æ»¤æ³¢å™¨(Gaussian Filter)ã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™ä¼šæŠŠ\(\mu\)è®¾æˆ0ï¼Œè¿™æ ·æ°¸è¿œæ˜¯æœ€ä¸­å¿ƒçš„ä¿¡å·å¸¦æ¥æœ€å¤§çš„è´¡çŒ®ã€‚ä½†æ˜¯è¿™ä¸ªæ¦‚ç‡å¯†åº¦å‡½æ•°çš„\(x\)çš„èŒƒå›´æ˜¯\((-\infin, \infin)\)ï¼Œæˆ‘ä»¬ä¸å¯èƒ½å¯¹æ‰€æœ‰çš„ä¿¡å·éƒ½è¿›è¡Œé‡‡æ ·ï¼Œäºæ˜¯æˆ‘ä»¬ä¸€èˆ¬å¯¹\(3\sigma\)èŒƒå›´å†…çš„ä¿¡å·è¿›è¡Œé‡‡æ ·ï¼Œå¯¹1Dçš„æ­£æ€åˆ†å¸ƒæ¥è¯´ï¼Œ\((-3\sigma, 3\sigma)\)å æ®äº†çº¦99.7%çš„é¢ç§¯ã€‚å› æ­¤æˆ‘ä»¬å¾€å¾€ä½¿ç”¨ä¸‰å€çš„\(sigma\)ä½œä¸ºé‡‡æ ·çš„åŠå¾„ï¼Œäº‹å®ä¸Šåœ¨2Dçš„æ—¶å€™ï¼Œå¯èƒ½éœ€è¦æ›´å¤§çš„é‡‡æ ·åŠå¾„æ‰èƒ½æ¶ˆé™¤æ˜æ˜¾çš„é‡‡æ ·åŠå¾„è¿‡å°çš„ç‘•ç–µã€‚
æœ‰ä¸€ç‚¹å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè™½ç„¶æˆ‘å¹¶ä¸ä¼šå…·ä½“çš„å¾®ç§¯åˆ†çš„è®¡ç®—ï¼Œä½†æ®æˆ‘æ‰€çŸ¥å…ˆåæ‰§è¡Œä¸¤ä¸ª\(\sigma\)å€¼åˆ†åˆ«ä¸º\(x\)å’Œ\(y\)é«˜æ–¯æ¨¡ç³Šï¼Œç­‰ä»·äºæ‰§è¡Œä¸€æ¬¡\(\sigma\)å€¼ä¸º\(\sqrt {x^2+y^2}\)çš„é«˜æ–¯æ¨¡ç³Šã€‚
å¦ä¸€ä¸ªæœ‰è¶£çš„ç‚¹æ˜¯ï¼Œåœ¨æ™®é€šçš„æ¨¡ç³Šæ“ä½œæ˜¯æˆ‘ä»¬å¾€å¾€ä¼šç”¨é™é‡‡æ ·å†å‡é‡‡æ ·çš„æ–¹å¼æ¥å‡å°‘é‡‡æ ·çš„æ¬¡æ•°ã€‚å¯¹äºåŠåˆ†è¾¨ç‡çš„çº¿æ€§1Dé™é‡‡æ ·å’Œå‡é‡‡æ ·ï¼Œä¸­å¿ƒåƒç´ ä¿ç•™äº†\(\frac 3 8\)çš„ä¹‹å‰åƒç´ çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°é‚£ä¹ˆä¸€ä¸ª\(\sigma\)çš„å€¼ä½¿å¾—å…¶åœ¨\((-0.5, 0.5)\)ä¹‹é—´çš„é¢ç§¯çº¦ç­‰äº\(\frac 3 8\)ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½è¯´æˆ‘ä»¬é€šè¿‡çº¿æ€§é™é‡‡æ ·å’Œå‡é‡‡æ ·åšåˆ°äº†è¿‘ä¼¼å¯¹åº”\(\sigma\)çš„é«˜æ–¯æ¨¡ç³Šçš„æ•ˆæœã€‚å¯æƒœè¿™ä¸ª\(\sigma\)ä¸å¤ªå¥½ç®—ï¼Œæœ‰Group Shared Memoryä¹Ÿæ²¡æœ‰å¿…è¦å»åšé¢å¤–çš„é™é‡‡æ ·å’Œå‡é‡‡æ ·äº†ã€‚
åœ¨æœ¬æ–‡ä¸­ï¼Œä¼šé€šè¿‡æ¨ªç«–ä¸¤ä¸ª1Dé«˜æ–¯æ»¤æ³¢å™¨æ¥ç­‰æ•ˆä¸€ä¸ª2Dçš„é«˜æ–¯æ»¤æ³¢å™¨ï¼Œä½¿ç”¨Group Shared Memoryçš„è¯ï¼Œå€’æ˜¯ä¸€ä¸ª2Dçš„é«˜æ–¯æ»¤æ³¢å™¨æ•ˆç‡æ›´é«˜ä¸€äº›ï¼Œä¸è¿‡ä¸ºäº†åç»­çš„æ‰©å±•æ€§ï¼Œæœ¬æ–‡æ‹†æˆäº†ä¸¤ä¸ªæ»¤æ³¢å™¨ã€‚
å…·ä½“çš„å®ç°æ–¹æ³• å‰©ä¸‹çš„å°±å’Œä¹‹å‰å¤§åŒå°å¼‚äº†ï¼Œä¸ºäº†ç¡®ä¿æ¯ä¸ªåƒç´ åªä¼šè¿›è¡Œè‡³å¤šä¸¤æ¬¡é‡‡æ ·ï¼Œéœ€è¦é™åˆ¶é«˜æ–¯æ¨¡ç³Šçš„æœ€å¤§åŠå¾„GAUSSIAN_BLUR_MAX_RADIUSä¸ºTHREAD_GROUP_SIZEçš„ä¸€åŠã€‚è€Œä¸ºäº†2Dçš„é«˜æ–¯æ¨¡ç³Šåœ¨æ¯”è¾ƒæç«¯çš„æƒ…å†µä¸‹ä¹Ÿèƒ½æœ‰æ¯”è¾ƒå¥½çš„æ•ˆæœï¼Œæˆ‘çš„é«˜æ–¯æ¨¡ç³Šçš„åŠå¾„ä¼šæ˜¯\(\sigma\)çš„3.8å€å‘ä¸Šå–æ•´ã€‚
GaussianBlurComputeShader.compute è¿™æ˜¯ä¸€ä¸ªæ¨ªç«–ä¸¤æ¬¡é«˜æ–¯æ¨¡ç³Šçš„Compute Shaderï¼Œé€šè¿‡Group Shared Memoryä¼˜åŒ–äº†åŸæœ¬é«˜æ–¯æ¨¡ç³Šçš„æ¯ä¸ªåƒç´ çš„é‡‡æ ·æ“ä½œï¼ˆè‡³å¤šä¸¤æ¬¡ï¼‰ã€‚æœ€å¤§æ¨¡ç³ŠåŠå¾„ä¸º128ä¸ªåƒç´ ã€‚
#pragma kernel GaussianH #pragma kernel GaussianV Texture2D&lt;float4> _SourceTex; RWTexture2D&lt;float4> _RW_TargetTex; StructuredBuffer&lt;float> _GaussianWeights; float4 _TextureSize; #define GAUSSIAN_BLUR_MAX_RADIUS 128 #define THREAD_GROUP_SIZE 256 const static int CACHED_COLOR_SIZE = THREAD_GROUP_SIZE +GAUSSIAN_BLUR_MAX_RADIUS*2; groupshared half3 cachedColor[CACHED_COLOR_SIZE]; void SetCachedColor(half3 color, int index) { cachedColor[index] = color; } half3 GetCachedColor(int threadPos) { return cachedColor[threadPos + GAUSSIAN_BLUR_MAX_RADIUS]; } void CacheColor(int2 groupCacheStartPos, int cacheIndex, int isHorizontal) { int2 texturePos = groupCacheStartPos + cacheIndex * int2(isHorizontal, 1 - isHorizontal); texturePos = clamp(texturePos, 0, _TextureSize....</p></div><footer class=entry-footer><span title='2023-04-05 12:00:00 +0800 CST'>April 5, 2023</span>&nbsp;Â·&nbsp;zznewclear13</footer><a class=entry-link aria-label="post link to å†è®®é«˜æ–¯æ¨¡ç³Š" href=https://zznewclear13.github.io/posts/gaussian-blur-revisited/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://zznewclear13.github.io/tags/post-process/page/2/>Next&nbsp;&nbsp;Â»</a></nav></footer><div style=display:none>zznewclear13 æŠ€æœ¯ç¾æœ¯ å›¾å½¢å­¦ ä¸ªäººåšå®¢ technical art computer graphics</div></main><footer class=footer><span>&copy; 2024 <a href=https://zznewclear13.github.io/>ZZNEWCLEAR13</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>