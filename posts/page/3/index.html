<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | ZZNEWCLEAR13</title>
<meta name=keywords content><meta name=description content="Posts - ZZNEWCLEAR13"><meta name=author content="zznewclear13"><link rel=canonical href=https://zznewclear13.github.io/posts/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://zznewclear13.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://zznewclear13.github.io/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://zznewclear13.github.io/favicon.ico><link rel=apple-touch-icon href=https://zznewclear13.github.io/favicon.ico><link rel=mask-icon href=https://zznewclear13.github.io/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://zznewclear13.github.io/posts/index.xml><link rel=alternate hreflang=en href=https://zznewclear13.github.io/posts/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-157509723-1","auto"),ga("send","pageview"))</script><meta property="og:title" content="Posts"><meta property="og:description" content="è¿™é‡Œæ˜¯zznewclear13çš„ï¼Œåˆ†äº«åˆ«å¤„æ‰¾ä¸åˆ°çš„å›¾å½¢å­¦å’ŒæŠ€æœ¯ç¾æœ¯ç›¸å…³å†…å®¹çš„ï¼Œä¸ªäººç½‘ç«™ã€‚"><meta property="og:type" content="website"><meta property="og:url" content="https://zznewclear13.github.io/posts/"><meta property="og:image" content="https://zznewclear13.github.io/posts/images/address.png"><meta property="og:site_name" content="ZZNEWCLEAR13"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://zznewclear13.github.io/posts/images/address.png"><meta name=twitter:title content="Posts"><meta name=twitter:description content="è¿™é‡Œæ˜¯zznewclear13çš„ï¼Œåˆ†äº«åˆ«å¤„æ‰¾ä¸åˆ°çš„å›¾å½¢å­¦å’ŒæŠ€æœ¯ç¾æœ¯ç›¸å…³å†…å®¹çš„ï¼Œä¸ªäººç½‘ç«™ã€‚"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://zznewclear13.github.io/posts/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://zznewclear13.github.io/ accesskey=h title="ZZNEWCLEAR13 (Alt + H)"><img src=https://zznewclear13.github.io/apple-touch-icon.png alt aria-label=logo height=35>ZZNEWCLEAR13</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://zznewclear13.github.io/now/ title=è¿›è¡Œæ—¶><span>è¿›è¡Œæ—¶</span></a></li><li><a href=https://zznewclear13.github.io/tags/ title=æ ‡ç­¾><span>æ ‡ç­¾</span></a></li><li><a href=https://zznewclear13.github.io/categories/ title=åˆ†ç±»><span>åˆ†ç±»</span></a></li><li><a href=https://zznewclear13.github.io/links/ title=å‹æƒ…é“¾æ¥><span>å‹æƒ…é“¾æ¥</span></a></li><li><a href=https://zznewclear13.github.io/search/ title="ğŸ” (Alt + /)" accesskey=/><span>ğŸ”</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://zznewclear13.github.io/>Home</a></div><h1>Posts</h1></header><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://zznewclear13.github.io/posts/images/CircularBlur.png alt="Circular Blur Cover"></figure><header class=entry-header><h2 class=entry-hint-parent>Unityä¸¤ä¸ªPassçš„åœ†å½¢æ¨¡ç³Š</h2></header><div class=entry-content><p>åœ†å½¢æ¨¡ç³Š åœ†å½¢æ¨¡ç³Šï¼Œåœ¨Photoshopé‡Œåˆç§°é•œå¤´æ¨¡ç³Š(Lens Blur)ï¼Œå’Œæ™¯æ·±ç»“åˆåœ¨ä¸€èµ·çš„æ—¶å€™è¢«ç§°ä½œæ•£æ™¯(Bokeh)ï¼Œæ˜¯æŒ‡åœ¨æ‘„å½±æ—¶å¤±ç„¦çš„åŒºåŸŸäº§ç”Ÿçš„å’Œå…‰åœˆçš„å½¢çŠ¶ä¸€è‡´çš„æ¨¡ç³Šæ•ˆæœï¼Œäº”è¾¹å½¢å…«è¾¹å½¢æˆ–æ˜¯åœ†å½¢éƒ½æœ‰å¯èƒ½ã€‚
åœ¨è®¡ç®—æœºå›¾å½¢å­¦ä¸­å®ç°æ™¯æ·±æ•ˆæœåŸºæœ¬ä¸Šæœ‰ä¸¤ç§æ–¹æ³•ï¼šç¬¬ä¸€ç§ä¹Ÿæ˜¯æœ€å¸¸ç”¨çš„ï¼Œé€šè¿‡é»„é‡‘ç‡ç”Ÿæˆä¸€ç³»åˆ—çš„é‡‡æ ·ç‚¹ï¼Œä½¿å¾—å…¶å½¢çŠ¶æ¥è¿‘æƒ³è¦æ¨¡ç³Šçš„å½¢çŠ¶ï¼Œè¿™ç§æ–¹æ³•éœ€è¦å¾ˆå¤šå¾ˆå¤šçš„é‡‡æ ·ç‚¹ï¼ŒåŸºæœ¬ä¸Šæ‰¾åˆ°çš„éƒ½æ˜¯60æ¬¡ä»¥ä¸Šçš„é‡‡æ ·æ¬¡æ•°ï¼Œç”±äºé‡‡æ ·ç‚¹çš„åˆ†å¸ƒä¸ä¸€å®šæ­£å¥½åœ¨åƒç´ ç‚¹ä¸­å¿ƒï¼Œä¹Ÿä¸èƒ½è½»æ˜“åœ°ä½¿ç”¨Group Shared Memoryè¿›è¡Œä¼˜åŒ–ï¼Œäº‹å®ä¸Šå¤§çš„æ¨¡ç³ŠåŠå¾„å¾ˆå¯èƒ½å¯¼è‡´Group Shared Memoryçš„å¤§å°ä¸å¤Ÿï¼›å¦ä¸€ç§æ˜¯é’ˆå¯¹äºç‰¹æ®Šçš„æ¨¡ç³Šå½¢çŠ¶ï¼Œæ¯”å¦‚æ­£å…­è¾¹å½¢ï¼Œå¯ä»¥ä½¿ç”¨ä¸‰æ¬¡ï¼ˆMRTçš„è¯å¯ä»¥è®¤ä¸ºæ˜¯ä¸¤æ¬¡ï¼‰1Dçš„æ¨¡ç³Šæ¥ç»„åˆè€Œæˆï¼Œå¯ä»¥åœ¨Colin BarrÃ©-Briseboisçš„åšå®¢Hexagonal Bokeh Blur Revisitedä¸­çœ‹åˆ°è¯¦ç»†çš„è¯´æ˜ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ä»–æ­¤å‰ä¹Ÿåœ¨EAå·¥ä½œè¿‡ï¼ˆçœ‹æ¥EAæ˜¯çœŸçš„å¾ˆå–œæ¬¢æ•£æ™¯å•Šï¼‰ã€‚
EAçš„æ¸²æŸ“å·¥ç¨‹å¸ˆKleber Garciaåœ¨2018å¹´çš„GDCæ¼”è®²Circular Separable Convolution Depth of Fieldä¸­æåˆ°äº†é€šè¿‡å¤æ•°çš„è¿ç®—æ¥å®ç°åœ†å½¢æ¨¡ç³Šçš„ç®—æ³•ï¼Œå…¶èƒŒåçš„æ•°å­¦æˆ‘è¿™é‡Œå°±ä¸å†èµ˜è¿°äº†ï¼Œæ„Ÿå…´è¶£çš„è¯å¯ä»¥å‚è€ƒCircularly symmetric convolution and lens bluè¿™ç¯‡æ–‡ç« ã€‚åœ†å½¢æ¨¡ç³Šçš„å‚æ•°çš„ç”Ÿæˆçš„ä»£ç å¯ä»¥åœ¨Kleber Garciaçš„å…¬å¼€ä»“åº“é‡Œæ‰¾åˆ°ã€‚Kleber Garciaæœ¬äººä¹Ÿåœ¨Shadertoyä¸Šå†™äº†å…·ä½“çš„åœ†å½¢æ¨¡ç³Šçš„ä»£ç ã€‚
Circular Dof
ç”±äºæ™¯æ·±æ•ˆæœç›¸å¯¹æ¥è¯´æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œå°±åªè€ƒè™‘å¯¹æ•´ä¸ªå±å¹•æ–½åŠ ç›¸åŒç¨‹åº¦çš„åœ†å½¢æ¨¡ç³Šæ•ˆæœã€‚
å…·ä½“çš„å®ç°æ–¹æ³• å…¶å®å¤§éƒ¨åˆ†å’Œä¹‹å‰çš„é«˜æ–¯æ¨¡ç³Šæ²¡æœ‰ä»€ä¹ˆå·®åˆ«ã€‚åœ¨åˆ†ç¦»å·ç§¯åœ†å½¢æ¨¡ç³Šçš„ç®—æ³•ä¸­ï¼Œåœ†å½¢çš„æ•ˆæœæ˜¯é€šè¿‡å¤šä¸ªFilterå åŠ è€Œæˆçš„ï¼Œæ¯ä¸ªFilterå¯¹åº”å®éƒ¨å’Œè™šéƒ¨ä¸¤ä¸ªå‚æ•°ã€‚ä»¥æœ¬æ–‡ä¸ºä¾‹ï¼Œæœ¬æ–‡ä½¿ç”¨äº†ä¸¤ä¸ªFilterï¼Œå¯¹äºä¸€ä¸ªFilterçš„ä¸€ä¸ªé¢œè‰²åˆ†é‡ï¼Œéœ€è¦å‚¨å­˜å®éƒ¨è™šéƒ¨ä¸¤ä¸ªæ•°æ®ï¼Œæ€»ä½“å°±éœ€è¦2x3x2=12ä¸ªé€šé“ï¼Œä½¿ç”¨ä¸‰å¼ R16G16B16A16_SFloatå°±èƒ½å‚¨å­˜æ‰€æœ‰çš„æ•°æ®ã€‚åœ¨Kleber Garciaçš„æ¼”è®²ä¸­ä»–è¿˜æåˆ°äº†ï¼Œå¯ä»¥ä½¿ç”¨bracketçš„æ–¹æ³•ï¼Œå°†é¢œè‰²çš„å·ç§¯æ•°æ®å‚¨å­˜åˆ°å¦ä¸€å¼ å›¾ä¸­ï¼Œè¿™æ ·ä¸­é—´çš„Filterçš„ç»“æœå°±ä¼šè½åœ¨[0, 1]çš„èŒƒå›´å†…ï¼Œå°±èƒ½ä½¿ç”¨R8G8A8B8æ¥å‚¨å­˜äº†ï¼Œå¯ä»¥èŠ‚çœä¸€åŠçš„å¸¦å®½ï¼ˆä½†æ˜¯é¢œè‰²çš„å·ç§¯æ•°æ®ä¸ä¹Ÿè¦ä¸€å¼ 32ä½çš„å›¾å—ï¼Œè¿™é‡Œæˆ‘æ²¡å¤ªæ‡‚ï¼Œæ„Ÿè§‰ä¼˜åŒ–äº†ä½†åˆæ²¡é‚£ä¹ˆä¼˜åŒ–ï¼Œç´¢æ€§å°±æ²¡é‚£ä¹ˆåšï¼‰ã€‚
æ•´ä½“çš„æ“ä½œæ˜¯ï¼š1. é‡‡æ ·æºå›¾ç‰‡ï¼Œå¯¹æ¯ä¸ªFilterå’Œæ¯ä¸ªé¢œè‰²åˆ†é‡è®¡ç®—å®éƒ¨å’Œè™šéƒ¨çš„å€¼ï¼Œæ°´å¹³ç´¯åŠ åå‚¨å­˜åˆ°ä¸­é—´è´´å›¾ä¸­ï¼›2. é‡‡æ ·ä¸­é—´è´´å›¾ï¼Œå¯¹æ¯ä¸ªFilterå’Œæ¯ä¸ªé¢œè‰²åˆ†é‡è®¡ç®—å®éƒ¨å’Œè™šéƒ¨çš„å€¼ï¼Œç«–ç›´ç´¯åŠ åä¹˜ä¸Šå„è‡ªçš„æƒé‡å°±å¾—åˆ°æœ€ç»ˆçš„é¢œè‰²äº†ã€‚ç”±äºæˆ‘æ²¡æœ‰ä½¿ç”¨bracketçš„æ–¹æ³•ï¼ŒFilterä¸­ä¼šæœ‰è´Ÿå€¼å­˜åœ¨ï¼Œåœ¨ä»…ä½¿ç”¨ä¸¤ä¸ªFilterä¸”åŠå¾„è¾ƒå¤§ä¸”åƒç´ é¢œè‰²è¿‡äº®çš„æ—¶å€™ï¼Œç”±äºbandingçš„å­˜åœ¨ä¼šä½¿æœ€ç»ˆçš„é¢œè‰²å‡ºç°è´Ÿå€¼ï¼Œè§£å†³æ–¹æ³•æ˜¯åœ¨è¯»å–é¢œè‰²çš„æ—¶å€™åšä¸€æ¬¡Clampæˆ–è€…æ˜¯ToneMappingåˆ°åˆç†èŒƒå›´ã€‚
CircularBlurFilterGenerator.cs æ”¹å†™è‡ªKleber Garciaçš„å…¬å¼€ä»“åº“ã€‚
/* Copyright 2023 zznewclear13 (zznewclear@gmail.com) Copyright 2016 Kleber A Garcia (kecho_garcia@hotmail.com) Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software....</p></div><footer class=entry-footer><span title='2023-04-09 12:00:00 +0800 CST'>April 9, 2023</span>&nbsp;Â·&nbsp;zznewclear13</footer><a class=entry-link aria-label="post link to Unityä¸¤ä¸ªPassçš„åœ†å½¢æ¨¡ç³Š" href=https://zznewclear13.github.io/posts/unity-two-pass-circular-blur/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://zznewclear13.github.io/posts/images/GaussianBlurRevisited.png alt="Gaussian Blur Cover"></figure><header class=entry-header><h2 class=entry-hint-parent>å†è®®é«˜æ–¯æ¨¡ç³Š</h2></header><div class=entry-content><p>å°†è¿‘ä¸¤å¹´ä¹‹åå†å›è¿‡å¤´æ¥åˆ¶ä½œé«˜æ–¯æ¨¡ç³Š è™½ç„¶ä¸¤å¹´å‰å·²ç»å†™è¿‡äº†ä½¿ç”¨Group Shared MemoryåŠ é€Ÿé«˜æ–¯æ¨¡ç³Šè¿™ç¯‡æ–‡ç« äº†ã€‚ä½†å½“æ—¶å†™çš„æ—¶å€™ä»æœ‰ä¸€äº›é—æ†¾çš„åœ°æ–¹ï¼Œç”±äºä½¿ç”¨çš„æ˜¯é•¿åº¦ä¸º17çš„é™æ€çš„é«˜æ–¯æ¨¡ç³Šçš„æ•°ç»„ï¼ˆå®é™…ä¸Šåªæœ‰9ä¸ªæƒé‡ï¼‰ï¼Œè™½ç„¶åœ¨ä¸€å®šç¨‹åº¦ä¸Šèƒ½å¤Ÿè¾¾åˆ°ä»»æ„è°ƒèŠ‚é«˜æ–¯æ¨¡ç³Šçš„ç¨‹åº¦çš„æ•ˆæœï¼Œä½†åœ¨è¾ƒä½ç¨‹åº¦çš„é«˜æ–¯æ¨¡ç³Šæ—¶ï¼Œæ˜¯é€šè¿‡æ‰‹åŠ¨çº¿æ€§æ’å€¼æ‰¾åˆ°åˆé€‚çš„é‡‡æ ·é¢œè‰²ï¼Œä¸”ä¸€å®šä¼šæœ‰17æ¬¡çš„é¢œè‰²å’Œæƒé‡çš„è¿ç®—ï¼›è€Œåœ¨è¾ƒé«˜ç¨‹åº¦çš„é«˜æ–¯æ¨¡ç³Šæ—¶ï¼Œç”±äºä»…æœ‰åä¸ƒä¸ªæœ‰æ•ˆçš„é¢œè‰²ç‚¹ï¼Œä¼šæœ‰æ˜æ˜¾çš„é‡‡æ ·æ¬¡æ•°ä¸è¶³çš„ç‘•ç–µã€‚
è€Œè¿™ä¸¤å¹´ä¹‹é—´æˆ‘ä¹Ÿæ›¾è€ƒè™‘ä½¿ç”¨ä¸åŒçš„æ–¹æ³•æ¥åˆ¶ä½œä¸€ä¸ªæ—¢èƒ½æ»¡è¶³å¾ˆé«˜ç¨‹åº¦çš„é«˜æ–¯æ¨¡ç³Šï¼Œåˆèƒ½å…¼é¡¾å¾ˆå°ç¨‹åº¦çš„é«˜æ–¯æ¨¡ç³Šï¼Œæ€§èƒ½ä¸Šä¹Ÿç›¸å¯¹é«˜æ•ˆï¼Œä¸”ä½¿ç”¨åŒä¸€å¥—é€šç”¨çš„ä»£ç ï¼Œçš„é«˜æ–¯æ¨¡ç³Šæ•ˆæœã€‚ä¸‹é¢ä¾¿æ˜¯æˆ‘ä¹‹å‰åœ¨Shadertoyä¸Šå†™çš„é€šè¿‡éšæœºé‡‡æ ·å’Œå†å²æ··åˆçš„é«˜æ–¯æ¨¡ç³Šæ•ˆæœã€‚
Stochastic Gaussian Blur
ä½†éšæœºå¸¦æ¥çš„å™ªå£°å’Œå†å²æ··åˆå¸¦æ¥çš„é™åˆ¶ï¼Œå†³å®šäº†è¿™ç§æ–¹æ³•ç»ˆç©¶ä¸èƒ½çœŸæ­£åœ°ä½¿ç”¨åœ¨é¡¹ç›®ä¸­ï¼Œäºæ˜¯æˆ‘åˆå¼€å§‹å›åˆ°äº†ä½¿ç”¨Compute Shaderå’ŒGroup Shared Memoryæ¥è®¡ç®—é«˜æ–¯æ¨¡ç³Šæ•ˆæœçš„è€è·¯å­ä¸Šã€‚ä¸åŒçš„æ˜¯ï¼Œè¿™æ¬¡æˆ‘ä½¿ç”¨äº†Compute BufferæŠŠé«˜æ–¯æ¨¡ç³Šçš„å‚æ•°ä¼ ç»™Shaderï¼Œè¿™æ ·å°±èƒ½ç¡®ä¿èŒƒå›´å†…çš„æ¯ä¸€ä¸ªé‡‡æ ·ç‚¹éƒ½èƒ½å¤Ÿå¯¹æœ€åçš„é¢œè‰²äº§ç”Ÿåº”æœ‰çš„è´¡çŒ®ã€‚
æ­£æ€åˆ†å¸ƒ(Normal Distribution) å’Œä¹‹å‰ä¸åŒçš„æ˜¯ï¼Œè¿™æ¬¡æˆ‘ä»¬è¦å…ˆä»æ­£æ€åˆ†å¸ƒå…¥æ‰‹ï¼Œä»æ­£æ€åˆ†å¸ƒçš„ç‰¹æ€§æ¥è€ƒè™‘æˆ‘ä»¬çš„è®¡ç®—æ–¹å¼ã€‚æ­£æ€åˆ†å¸ƒçš„æ¦‚ç‡å¯†åº¦å‡½æ•°(probability density function)å¦‚ä¸‹æ‰€ç¤ºï¼š $$ f(x) = \frac 1 {\sigma \sqrt{2 \pi}} e^{- \frac 1 2 (\frac {x-\mu} \sigma)^2} $$ ä½¿ç”¨æ­£æ€åˆ†å¸ƒå¯¹ä¿¡å·è¿›è¡Œè¿‡æ»¤ï¼Œè¢«ç§°ä½œé«˜æ–¯æ»¤æ³¢å™¨(Gaussian Filter)ã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™ä¼šæŠŠ\(\mu\)è®¾æˆ0ï¼Œè¿™æ ·æ°¸è¿œæ˜¯æœ€ä¸­å¿ƒçš„ä¿¡å·å¸¦æ¥æœ€å¤§çš„è´¡çŒ®ã€‚ä½†æ˜¯è¿™ä¸ªæ¦‚ç‡å¯†åº¦å‡½æ•°çš„\(x\)çš„èŒƒå›´æ˜¯\((-\infin, \infin)\)ï¼Œæˆ‘ä»¬ä¸å¯èƒ½å¯¹æ‰€æœ‰çš„ä¿¡å·éƒ½è¿›è¡Œé‡‡æ ·ï¼Œäºæ˜¯æˆ‘ä»¬ä¸€èˆ¬å¯¹\(3\sigma\)èŒƒå›´å†…çš„ä¿¡å·è¿›è¡Œé‡‡æ ·ï¼Œå¯¹1Dçš„æ­£æ€åˆ†å¸ƒæ¥è¯´ï¼Œ\((-3\sigma, 3\sigma)\)å æ®äº†çº¦99.7%çš„é¢ç§¯ã€‚å› æ­¤æˆ‘ä»¬å¾€å¾€ä½¿ç”¨ä¸‰å€çš„\(sigma\)ä½œä¸ºé‡‡æ ·çš„åŠå¾„ï¼Œäº‹å®ä¸Šåœ¨2Dçš„æ—¶å€™ï¼Œå¯èƒ½éœ€è¦æ›´å¤§çš„é‡‡æ ·åŠå¾„æ‰èƒ½æ¶ˆé™¤æ˜æ˜¾çš„é‡‡æ ·åŠå¾„è¿‡å°çš„ç‘•ç–µã€‚
æœ‰ä¸€ç‚¹å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè™½ç„¶æˆ‘å¹¶ä¸ä¼šå…·ä½“çš„å¾®ç§¯åˆ†çš„è®¡ç®—ï¼Œä½†æ®æˆ‘æ‰€çŸ¥å…ˆåæ‰§è¡Œä¸¤ä¸ª\(\sigma\)å€¼åˆ†åˆ«ä¸º\(x\)å’Œ\(y\)é«˜æ–¯æ¨¡ç³Šï¼Œç­‰ä»·äºæ‰§è¡Œä¸€æ¬¡\(\sigma\)å€¼ä¸º\(\sqrt {x^2+y^2}\)çš„é«˜æ–¯æ¨¡ç³Šã€‚
å¦ä¸€ä¸ªæœ‰è¶£çš„ç‚¹æ˜¯ï¼Œåœ¨æ™®é€šçš„æ¨¡ç³Šæ“ä½œæ˜¯æˆ‘ä»¬å¾€å¾€ä¼šç”¨é™é‡‡æ ·å†å‡é‡‡æ ·çš„æ–¹å¼æ¥å‡å°‘é‡‡æ ·çš„æ¬¡æ•°ã€‚å¯¹äºåŠåˆ†è¾¨ç‡çš„çº¿æ€§1Dé™é‡‡æ ·å’Œå‡é‡‡æ ·ï¼Œä¸­å¿ƒåƒç´ ä¿ç•™äº†\(\frac 3 8\)çš„ä¹‹å‰åƒç´ çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°é‚£ä¹ˆä¸€ä¸ª\(\sigma\)çš„å€¼ä½¿å¾—å…¶åœ¨\((-0.5, 0.5)\)ä¹‹é—´çš„é¢ç§¯çº¦ç­‰äº\(\frac 3 8\)ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½è¯´æˆ‘ä»¬é€šè¿‡çº¿æ€§é™é‡‡æ ·å’Œå‡é‡‡æ ·åšåˆ°äº†è¿‘ä¼¼å¯¹åº”\(\sigma\)çš„é«˜æ–¯æ¨¡ç³Šçš„æ•ˆæœã€‚å¯æƒœè¿™ä¸ª\(\sigma\)ä¸å¤ªå¥½ç®—ï¼Œæœ‰Group Shared Memoryä¹Ÿæ²¡æœ‰å¿…è¦å»åšé¢å¤–çš„é™é‡‡æ ·å’Œå‡é‡‡æ ·äº†ã€‚
åœ¨æœ¬æ–‡ä¸­ï¼Œä¼šé€šè¿‡æ¨ªç«–ä¸¤ä¸ª1Dé«˜æ–¯æ»¤æ³¢å™¨æ¥ç­‰æ•ˆä¸€ä¸ª2Dçš„é«˜æ–¯æ»¤æ³¢å™¨ï¼Œä½¿ç”¨Group Shared Memoryçš„è¯ï¼Œå€’æ˜¯ä¸€ä¸ª2Dçš„é«˜æ–¯æ»¤æ³¢å™¨æ•ˆç‡æ›´é«˜ä¸€äº›ï¼Œä¸è¿‡ä¸ºäº†åç»­çš„æ‰©å±•æ€§ï¼Œæœ¬æ–‡æ‹†æˆäº†ä¸¤ä¸ªæ»¤æ³¢å™¨ã€‚
å…·ä½“çš„å®ç°æ–¹æ³• å‰©ä¸‹çš„å°±å’Œä¹‹å‰å¤§åŒå°å¼‚äº†ï¼Œä¸ºäº†ç¡®ä¿æ¯ä¸ªåƒç´ åªä¼šè¿›è¡Œè‡³å¤šä¸¤æ¬¡é‡‡æ ·ï¼Œéœ€è¦é™åˆ¶é«˜æ–¯æ¨¡ç³Šçš„æœ€å¤§åŠå¾„GAUSSIAN_BLUR_MAX_RADIUSä¸ºTHREAD_GROUP_SIZEçš„ä¸€åŠã€‚è€Œä¸ºäº†2Dçš„é«˜æ–¯æ¨¡ç³Šåœ¨æ¯”è¾ƒæç«¯çš„æƒ…å†µä¸‹ä¹Ÿèƒ½æœ‰æ¯”è¾ƒå¥½çš„æ•ˆæœï¼Œæˆ‘çš„é«˜æ–¯æ¨¡ç³Šçš„åŠå¾„ä¼šæ˜¯\(\sigma\)çš„3.8å€å‘ä¸Šå–æ•´ã€‚
GaussianBlurComputeShader.compute è¿™æ˜¯ä¸€ä¸ªæ¨ªç«–ä¸¤æ¬¡é«˜æ–¯æ¨¡ç³Šçš„Compute Shaderï¼Œé€šè¿‡Group Shared Memoryä¼˜åŒ–äº†åŸæœ¬é«˜æ–¯æ¨¡ç³Šçš„æ¯ä¸ªåƒç´ çš„é‡‡æ ·æ“ä½œï¼ˆè‡³å¤šä¸¤æ¬¡ï¼‰ã€‚æœ€å¤§æ¨¡ç³ŠåŠå¾„ä¸º128ä¸ªåƒç´ ã€‚
#pragma kernel GaussianH #pragma kernel GaussianV Texture2D&lt;float4> _SourceTex; RWTexture2D&lt;float4> _RW_TargetTex; StructuredBuffer&lt;float> _GaussianWeights; float4 _TextureSize; #define GAUSSIAN_BLUR_MAX_RADIUS 128 #define THREAD_GROUP_SIZE 256 const static int CACHED_COLOR_SIZE = THREAD_GROUP_SIZE +GAUSSIAN_BLUR_MAX_RADIUS*2; groupshared half3 cachedColor[CACHED_COLOR_SIZE]; void SetCachedColor(half3 color, int index) { cachedColor[index] = color; } half3 GetCachedColor(int threadPos) { return cachedColor[threadPos + GAUSSIAN_BLUR_MAX_RADIUS]; } void CacheColor(int2 groupCacheStartPos, int cacheIndex, int isHorizontal) { int2 texturePos = groupCacheStartPos + cacheIndex * int2(isHorizontal, 1 - isHorizontal); texturePos = clamp(texturePos, 0, _TextureSize....</p></div><footer class=entry-footer><span title='2023-04-05 12:00:00 +0800 CST'>April 5, 2023</span>&nbsp;Â·&nbsp;zznewclear13</footer><a class=entry-link aria-label="post link to å†è®®é«˜æ–¯æ¨¡ç³Š" href=https://zznewclear13.github.io/posts/gaussian-blur-revisited/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://zznewclear13.github.io/posts/images/TileRendering.jpg alt="Tile Rendering Cover"></figure><header class=entry-header><h2 class=entry-hint-parent>æ¨¡ä»¿ç¼ºæ°§çš„ç“¦ç‰‡æ¸²æŸ“æ–¹æ³•</h2></header><div class=entry-content><p>ç¼ºæ°§çš„ç“¦ç‰‡æ¸²æŸ“çš„ç‰¹ç‚¹ å¾ˆå¯æƒœæˆ‘æ²¡æœ‰åœ¨RenderDocé‡Œæˆªåˆ°ç¼ºæ°§çš„å¸§ï¼Œä¸è¿‡æˆ‘è¿˜æ˜¯èƒ½ä»æ¸²æŸ“è¡¨ç°ä¸Šæ¥åˆ†æä¸€ä¸‹ç¼ºæ°§çš„ç“¦ç‰‡æ¸²æŸ“çš„ç‰¹ç‚¹ã€‚ç»è¿‡ä¸€æ®µæ—¶é—´çš„æ¸¸ç©å’Œä»ä¸‹é¢è¿™å¼ å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œç¼ºæ°§çš„æ¸¸æˆé€»è¾‘æ˜¯æŠŠæ•´ä¸ª2Dçš„åœ°å›¾åˆ†æˆä¸€ä¸ªä¸€ä¸ªæ ¼å­ï¼Œæ¯ä¸ªæ ¼å­è®°å½•äº†æ°”ä½“ã€æ¶²ä½“ã€å›ºä½“å’Œå»ºç­‘ç‰©çš„ä¿¡æ¯ã€‚æ°”ä½“åªæ˜¯ä¸€ä¸ªæ‰­æ›²çš„Shaderï¼Œæ¶²ä½“æ¸²æŸ“å’Œè®¡ç®—æ¯”è¾ƒå¤æ‚ï¼Œè¿™é‡Œæš‚æ—¶ä¸è€ƒè™‘ï¼Œå»ºç­‘ç‰©ä¸­çš„å¢™å’Œç®¡çº¿è™½ç„¶ä¹Ÿæœ‰ç¨‹åºåŒ–ç”Ÿæˆå†æ¸²æŸ“çš„æ•ˆæœï¼Œä½†å’Œåœºæ™¯ä¸­èµ„æºç±»å‹çš„å›ºä½“æ ¼å­æ˜¯ç¡¬ç›¸æ¥çš„å…³ç³»ï¼Œè¿™é‡Œä¹Ÿä¸è€ƒè™‘ã€‚æœ¬æ–‡çš„ç ”ç©¶é‡ç‚¹æ”¾åœ¨èµ„æºç±»å‹çš„å›ºä½“æ ¼å­çš„æ¸²æŸ“ä¸Šï¼ˆä¸åŒ…æ‹¬è¿™äº›æ ¼å­çš„ç¨‹åºåŒ–ç”Ÿæˆï¼‰ã€‚
èµ„æºç±»å‹çš„å›ºä½“æ ¼å­ï¼ˆè¿™é‡Œå°±ç®€ç§°ç“¦ç‰‡äº†ï¼‰çš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š
æœ‰å¤šç§ç±»å‹çš„ç“¦ç‰‡ ä»…åœ¨ä¸åŒç±»å‹çš„ç“¦ç‰‡ç›¸æ¥æ—¶ä¼šæœ‰é»‘è‰²çš„æè¾¹ ç“¦ç‰‡ä¹‹é—´ä¼šæœ‰æ’åºï¼Œä¼˜å…ˆçº§é«˜çš„ç“¦ç‰‡ä¼šæ›´å¤šåœ°æ‰©å¼  ç“¦ç‰‡ä¹‹é—´é»‘è‰²çš„æè¾¹å‘ˆç°å‘¨æœŸæ€§è§„å¾‹ æ¨¡ä»¿è¿™ç§æ¸²æŸ“çš„æ€è·¯ æœ€ç®€å•çš„æ€è·¯è‚¯å®šå°±æ˜¯åœ¨CPUä¸­è®¡ç®—æ¯ä¸€ä¸ªç“¦ç‰‡åº”å½“æœ‰çš„å½¢æ€ï¼Œç„¶åæ‰¾åˆ°å¯¹åº”çš„è´´å›¾ï¼ŒæŠŠç“¦ç‰‡åœ¨GPUä¸­ç»˜åˆ¶å‡ºæ¥äº†ã€‚ä½†æ˜¯è¿™æ ·å­åšçš„è¯å°±å¤±å»äº†æœ¬æ–‡çš„æ„ä¹‰ï¼Œä¹Ÿå¤ªè¿‡æ— è¶£äº†ã€‚æˆ‘æƒ³çš„æ˜¯å°½é‡å¤šåœ°ç”¨GPUæ¥è®¡ç®—æ¯ä¸ªç“¦ç‰‡çš„å½¢æ€ï¼ŒåŒæ—¶ä½¿ç”¨Instancingçš„æ–¹å¼ï¼Œç»˜åˆ¶æ¯ä¸€ä¸ªç“¦ç‰‡ã€‚
ç¬¬ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œä¸è§„åˆ™çš„ç“¦ç‰‡åº”å½“å¦‚ä½•ç»˜åˆ¶ã€‚å¦‚æœæ˜¯æ­£æ–¹å½¢çš„ç“¦ç‰‡ï¼Œèƒ½å¤Ÿå¾ˆè½»æ˜“åœ°ä½¿ç”¨ä¸€ä¸ªQuadå’Œçº¹ç†æ¥ç»˜åˆ¶ï¼Œä½†æ˜¯ä¸è§„åˆ™çš„ç“¦ç‰‡ï¼ŒåŠ¿å¿…ä¼šä½¿ç”¨é€æ˜åº¦æ··åˆçš„æ–¹å¼æ¥ç»˜åˆ¶ï¼Œè¿™æ—¶å¯¹åº”çš„æ¨¡å‹å°±ä¼šè¶…å‡ºç“¦ç‰‡çš„æ¸¸æˆé€»è¾‘ä¸Šçš„ä½ç½®ã€‚å› æ­¤ï¼Œæˆ‘æƒ³çš„æ˜¯ç»˜åˆ¶çš„Quadçš„æ•°é‡æ˜¯ç“¦ç‰‡å®é™…æ•°é‡çš„ä¸¤å€åŠ ä¸€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š
åœ¨è¿™å¼ å›¾ä¸­ï¼ŒABCä»£è¡¨äº†ä¸åŒç±»å‹çš„ç“¦ç‰‡ï¼Œå·¦è¾¹æ˜¯æ¸¸æˆæ¸¸ç©çš„æ—¶å€™é€»è¾‘ä¸Šçš„ç“¦ç‰‡åˆ†å¸ƒï¼ŒABCæ˜¯ç›¸æ¥çš„ï¼Œå³è¾¹æ˜¯åœ¨æ¸²æŸ“çš„æ—¶å€™çš„ç“¦ç‰‡çš„åˆ†å¸ƒï¼Œåœ¨åŸæœ‰ç“¦ç‰‡ä¸­é—´æ’å…¥æ–°çš„ç“¦ç‰‡ï¼Œä¸“é—¨ç”¨æ¥æ¸²æŸ“æ¥ç¼ã€‚å¯¹äº2å·ç“¦ç‰‡ï¼Œå…¶å·¦ä¸Šè§’å³ä¸Šè§’å³ä¸‹è§’å·¦ä¸‹è§’ï¼ˆé¡ºæ—¶é’ˆçš„é¡ºåºï¼‰åˆ†åˆ«æ˜¯ABCCï¼Œå†³å®šäº†è¿™æ˜¯ä¸€å—ä¸‰å—ç›¸æ¥çš„ç“¦ç‰‡ï¼›å¯¹äº1å·ç“¦ç‰‡ï¼Œå¯¹åº”çš„ç¼–å·æ˜¯AACCï¼ˆé€šè¿‡ä¸€äº›å¯¹2å–æ¨¡å–ä½™çš„è¿ç®—å¯ä»¥æ’é™¤æ‰Bï¼‰ï¼Œå†³å®šäº†è¿™æ˜¯ä¸€å—ä¸¤å—ç›¸æ¥çš„ç“¦ç‰‡ï¼›è€Œå¯¹äº3å’Œ4å·ç“¦ç‰‡ï¼Œå…¶ç¼–å·ä¸ºCCCCï¼Œå†³å®šäº†è¿™ä¸¤å—æ˜¯æ²¡æœ‰æ¥ç¼çš„ç“¦ç‰‡ã€‚è¿™æ—¶æˆ‘ä»¬åˆè€ƒè™‘åˆ°äº†ç“¦ç‰‡ä¹‹é—´ä¼˜å…ˆçº§çš„å…³ç³»ï¼Œå‡è®¾C>B>Aï¼Œåˆ™AACCå’ŒAABBçš„æ¥ç¼åº”å½“æ˜¯ç›¸åŒçš„ï¼ŒABCCå’ŒBCCAæ˜¯æ—‹è½¬äº†ä¹ååº¦çš„å…³ç³»ã€‚è€ƒè™‘åˆ°å¿…å®šä¼šæœ‰ä¸€ä¸ªç“¦ç‰‡å¤„äºæœ€ä½ä¼˜å…ˆçº§ï¼Œæˆ‘ä»¬åªéœ€è¦å°†æœ€ä½ä¼˜å…ˆçº§çš„ç“¦ç‰‡å›ºå®šåˆ°å·¦ä¸Šè§’ï¼Œè®¨è®ºå‰©ä¸‹ä¸‰ä¸ªç“¦ç‰‡çš„ä¼˜å…ˆçº§ä¸é¡ºåºå³å¯ã€‚å¾ªç€è¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ‰€æœ‰å¯èƒ½çš„æ¥ç¼ç”»åœ¨ä¸€å¼ å›¾ä¸Šï¼Œè¿™å¼ å›¾çš„RGBAé€šé“è®°å½•äº†ç“¦ç‰‡çš„ä¼˜å…ˆçº§ï¼ˆRä¼˜å…ˆçº§æœ€ä½ï¼ŒAä¼˜å…ˆçº§æœ€é«˜ï¼Œæ¥ç¼æˆ‘ä½¿ç”¨äº†ä¸€ä¸ªç»Ÿä¸€çš„ç°è‰²ä»¥ä¾¿åç»­æ¸²æŸ“ï¼‰ï¼Œå›¾ç‰‡å¦‚ä¸‹æ‰€ç¤ºï¼Œä¸ºäº†æ¯”è¾ƒå®¹æ˜“è§‚å¯Ÿï¼Œæˆ‘å¯¹Aé€šé“åšäº†åå‘ï¼Œä¸”å¯¹åº”çš„åœ¨ä¸‹æ–¹æ ‡æ³¨äº†ä¼˜å…ˆçº§é¡ºåºã€‚åŒæ—¶æˆ‘ä»¬è¿˜å¯¹åº”çš„å†™å¥½ä¸€ä¸ªå‡½æ•°ç”¨äºæ ¹æ®ä¼˜å…ˆçº§é¡ºåºæ‰¾åˆ°å¯¹åº”çš„æ¥ç¼ç±»å‹ä»è€Œåœ¨æ¸²æŸ“æ—¶æ‰¾åˆ°æ¥ç¼åœ¨å›¾ä¸Šçš„ä½ç½®ï¼ˆè§ONITileRender.hlslä¸­çš„GetMode(uint a, uint b, uint c)ï¼‰ã€‚
ç”±äºä¼šæœ‰ä¼˜å…ˆçº§çš„æ¯”è¾ƒï¼Œä¸å¯é¿å…åœ°ä¼šåœ¨GPUä¸­è¿›è¡Œæ’åºï¼Œä½¿ç”¨MergeSortçš„è¯ï¼Œ4ä¸ªå…ƒç´ ä¼šæœ‰5æ¬¡æ¯”è¾ƒï¼Œç”±äºæˆ‘ä»¬è¿˜éœ€è¦è·å¾—æ¯ä¸ªç“¦ç‰‡åœ¨å››ä¸ªç“¦ç‰‡ä¸­æ’åºçš„åºå·ï¼Œè¿™é‡Œå°±ç¡¬å†™äº†æ‰‹åŠ¨æ¯”è¾ƒï¼Œ6æ¬¡æ¯”è¾ƒå’ŒMergeSortçš„5æ¬¡ä¹Ÿå·®ä¸å¤ªå¤šã€‚æˆ‘ä»¬ç»˜åˆ¶çš„å›¾ä¸Šä»…æœ‰æœ€ä½ä¼˜å…ˆçº§ç“¦ç‰‡åœ¨å·¦ä¸Šè§’çš„æƒ…å†µï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦æ‰¾åˆ°æœ€ä½ä¼˜å…ˆçº§ç“¦ç‰‡åˆå§‹çš„åºå·ï¼Œä»è€Œåœ¨æ¸²æŸ“æ—¶æ—‹è½¬æˆ‘ä»¬çš„æ¥ç¼å›¾ï¼ˆè¿™é‡Œå°±ä½“ç°äº†æˆ‘ä»¬ä½¿ç”¨é¡ºæ—¶é’ˆç¼–å·çš„ä¼˜åŠ¿ï¼Œæ–¹ä¾¿äº†æ—‹è½¬çš„æ“ä½œï¼Œå¦‚æœæ˜¯å·¦ä¸Šè§’å³ä¸Šè§’å·¦ä¸‹è§’å³ä¸‹è§’çš„é¡ºåºï¼Œå°±ä¸å¤ªå¥½æ—‹è½¬äº†ï¼‰ã€‚
çŸ¥é“äº†æ¯ä¸€ä¸ªæ¥ç¼å›¾çš„æ—‹è½¬ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸ºå…¶æ¯ä¸€ä¸ªéƒ¨åˆ†ï¼ˆé€šé“ï¼‰æ¸²æŸ“ä¸åŒçš„è´´å›¾ã€‚è¿™é‡Œä½¿ç”¨äº†DrawProceduralIndirectæ¥è¿›è¡ŒInstancingçš„æ¸²æŸ“ï¼ŒDrawCallæ•°é‡ä¼šå’Œç“¦ç‰‡ç±»å‹çš„æ•°é‡ä¸€æ ·å¤šã€‚å¯¹äºä¸€ç§ç“¦ç‰‡ï¼Œéœ€è¦æ¸²æŸ“çš„æ€»ç“¦ç‰‡æ•°ç›¸å½“äºæ˜¯è¿™ç±»ç“¦ç‰‡çš„å›¾å½¢å‘å¤–æ‰©å±•ä¸€ä¸ªç“¦ç‰‡çš„æ•°é‡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ¤æ–­å·¦ä¸Šå³ä¸Šå³ä¸‹å·¦ä¸‹çš„ç“¦ç‰‡ç±»å‹æ¥è½»æ˜“åœ°åˆ¤æ–­å½“å‰ç“¦ç‰‡æ˜¯å¦åº”è¯¥å’Œç›®æ ‡ç“¦ç‰‡ç±»å‹ä¸€èµ·æ¸²æŸ“ã€‚æˆ‘ä»¬ä¼šä½¿ç”¨ä¸€ä¸ªæ•°æ®æ•°é‡ä¸ºç“¦ç‰‡ç±»å‹æ•°é‡*(2*åœ°å›¾å®½é«˜+1)çš„StructuredBufferæ¥ç»Ÿè®¡æ‰€æœ‰åº”å½“ç»˜åˆ¶çš„ç“¦ç‰‡ï¼ˆå®é™…ä½¿ç”¨çš„å¤§å°ä¸ä¼šå¤§äº4*(2*åœ°å›¾å®½+1)*(2*åœ°å›¾é«˜+1)ï¼‰ã€‚åŒæ—¶æˆ‘ä»¬ä¼šä½¿ç”¨ä¸€ä¸ªæ•°æ®æ•°é‡ä¸ºç“¦ç‰‡ç±»å‹æ•°é‡*5çš„ByteAddressBufferæ¥ç»Ÿè®¡æ¯ç§ç“¦ç‰‡ç±»å‹Instancingæ—¶éœ€è¦çš„å‚æ•°ã€‚
æœ¬æ–‡ä¸­çš„å²©çŸ³çš„2Dæ— ç¼è´´å›¾æ¥è‡ªOpenGameArt.org
å…·ä½“çš„ä»£ç å’Œç›¸å…³çš„è§£é‡Š ç”±äºä¼šç”¨åˆ°CommandBufferè¿›è¡Œç“¦ç‰‡çš„ç»˜åˆ¶ï¼Œæˆ‘å°±æŠŠç›¸å…³çš„ä»£ç æ”¾åˆ°Universal RPçš„Packageé‡Œäº†ã€‚CPUä»£ç ï¼ŒONITileRenderManager.csæ”¾åœ¨Packages/com.unity.render-pipelines.universal/Runtime/Overrides/ä¸‹ï¼ŒONITileRendererFeature.csæ”¾åœ¨Packages/com.unity.render-pipelines.universal/Runtime/RendererFeature/ä¸‹ï¼ŒONITileRenderPass.csæ”¾åœ¨Packages/com.unity.render-pipelines.universal/Runtime/Passes/ä¸‹ï¼›GPUä»£ç ï¼ŒONITileRender.hlslï¼ŒONITileComputeShader.computeå’ŒONITileRenderShader.shaderæ”¾åœ¨Packages/com.unity.render-pipelines.universal/Shaders/ONITile/ä¸‹ã€‚
ONITileRenderManagerç”¨äºåœ°å›¾çš„è®¾ç½®ã€è®¡ç®—å’ŒBufferçš„è·å–ã€‚ONITileRendererFeatureå’ŒONITileRenderPassç”¨äºåœ¨Unity URPä¸­æ¸²æŸ“ç“¦ç‰‡ï¼ŒONITileComputeShaderç”¨äºç“¦ç‰‡ç›¸å…³çš„è®¡ç®—ï¼ŒONITileRenderShaderç”¨äºç“¦ç‰‡çš„æ¸²æŸ“ã€‚
ONITileRenderManager.cs è¿™é‡Œå°¤å…¶éœ€è¦æ³¨æ„æ¯ä¸ªBufferçš„å¤§å°ã€‚åœ¨è¿™ä¸ªè„šæœ¬é‡Œä½¿ç”¨Compute Shaderåšäº†ä¸‰ä»¶äº‹ï¼š1. å¯¹åœ°å›¾æ¯ä¸€ä¸ªç‚¹ç”Ÿæˆä¸€ä¸ªéšæœºæ•°ä½œä¸ºç“¦ç‰‡ç±»å‹ï¼›2. ä»åœ°å›¾ä¸­è®¡ç®—æ¯ä¸€ç§ç“¦ç‰‡ç±»å‹éœ€è¦ç»˜åˆ¶çš„æ•°é‡ã€ä½ç½®ã€è§£å°ç±»å‹ã€æ—‹è½¬å’Œåº”å½“é‡‡æ ·çš„é€šé“ï¼›3. æŠŠByteAddressBufferä¸­çš„æ•°æ®å¤åˆ¶åˆ°IndirectArgumentBufferé‡Œã€‚äº‹å®ä¸Šæˆ‘æ„Ÿè§‰ComputeShader.Dispatchåº”è¯¥åšæˆä¸€ä¸ªå¼‚æ­¥çš„æ–¹æ³•ï¼Œä¸è¿‡è¿™ä¸ªè°ƒç”¨é¢‘ç‡ä¸é«˜ï¼Œå°±è¿™æ ·å¥½äº†ã€‚
using UnityEngine; [ExecuteInEditMode] public class ONITileRenderManager : MonoBehaviour { [HideInInspector] public static ONITileRenderManager Instance { get; private set; } public ComputeShader oniTileComputeShader; public int tileTypeCount = 4; public Vector2Int tileCount = new Vector2Int(16, 16); public Vector2 tileSize = Vector2.one; public Vector3 tileStartPos; public Vector2 randomSeed; public Texture[] mainTextures = new Texture[] {}; public Vector4 mainTextureST = new Vector4(1....</p></div><footer class=entry-footer><span title='2023-02-20 12:00:00 +0800 CST'>February 20, 2023</span>&nbsp;Â·&nbsp;zznewclear13</footer><a class=entry-link aria-label="post link to æ¨¡ä»¿ç¼ºæ°§çš„ç“¦ç‰‡æ¸²æŸ“æ–¹æ³•" href=https://zznewclear13.github.io/posts/mimic-oxygen-not-includeds-tile-rendering/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://zznewclear13.github.io/posts/images/GTAO.jpg alt="Ground Truth Ambient Occlusion Cover"></figure><header class=entry-header><h2 class=entry-hint-parent>Unityä½¿ç”¨ComputeShaderè®¡ç®—GTAO</h2></header><div class=entry-content><p>ç¯å¢ƒå…‰é®è”½ ç¯å¢ƒå…‰é®è”½ï¼Œåœ¨å¾ˆä¹…å¾ˆä¹…ä»¥å‰ç©åˆºå®¢ä¿¡æ¡çš„æ—¶å€™å°±çœ‹åˆ°è¿‡è¿™ä¸ªè¯è¯­ï¼Œä½†æ˜¯å¹¶ä¸æ‡‚ä»€ä¹ˆæ„æ€ï¼Œæœ¬ç€ç”»è´¨æ‹‰æ»¡çš„åŸåˆ™æ€»æ˜¯ä¼šå‹¾é€‰è¿™ä¸ªé€‰é¡¹ã€‚åæ¥æ‰çŸ¥é“ç¯å¢ƒå…‰é®è”½ç¿»è¯‘è‡ªAmbient Occlusionï¼ˆè¿˜çœŸæ˜¯ç›´ç™½çš„ç¿»è¯‘ï¼‰ï¼Œç”¨æ¥è¡¨ç°è§’è½é‡Œé˜´æš—çš„æ•ˆæœã€‚
ç¯å¢ƒå…‰é®è”½ä½œç”¨åœ¨å…‰çº¿è®¡ç®—çš„é—´æ¥å…‰ç…§çš„é˜¶æ®µï¼Œç”±äºå…‰æ …åŒ–æ¸²æŸ“çš„å±€é™æ€§ï¼Œé—´æ¥å…‰ç…§å¾€å¾€åˆ†ä¸ºæ¼«åå°„é—´æ¥å…‰ç…§å’Œé«˜å…‰é—´æ¥å…‰ç…§ï¼Œå› æ­¤ç¯å¢ƒå…‰é®è”½ä¹Ÿåˆ†æ¼«åå°„å’Œé«˜å…‰ä¸¤ç§ï¼Œè¿™é‡Œæš‚æ—¶åªè®¨è®ºä½œç”¨äºæ¼«åå°„é—´æ¥å…‰ç…§çš„æ¼«åå°„ç¯å¢ƒå…‰é®è”½ã€‚è€Œåˆç”±äºå‰å‘æ¸²æŸ“çš„å±€é™æ€§ï¼Œå±å¹•ç©ºé—´çš„ç¯å¢ƒå…‰é®è”½ä¸åˆ†å·®åˆ«åœ°ä½œç”¨äºç›´æ¥å…‰ç…§å’Œé—´æ¥å…‰ç…§ï¼Œå› æ­¤å…¶å¼ºåº¦è¿˜éœ€è¦ç‰¹åˆ«åœ°ç•™æ„ã€‚
Ground Truth Ambient Occlusionæ˜¯Jorge Jimenezåœ¨ä»–çš„æ–‡ç« Practical Real-Time Strategies for Accurate Indirect Occlusionä¸­ä»‹ç»çš„ä¸€ç§åœ¨ä¸»æœºä¸Šèƒ½å¤Ÿç¬¦åˆäº‹å®ç¯å¢ƒå…‰é®è”½æ•ˆæœçš„ä¸€ç§å±å¹•ç©ºé—´ç¯å¢ƒå…‰é®è”½çš„ç®—æ³•ã€‚æˆ‘è®¤ä¸ºè¿™ä¸ªç®—æ³•ç›¸è¾ƒäºå…¶ä»–çš„ç¯å¢ƒå…‰é®è”½çš„ç®—æ³•æœ€å¤§çš„ä¼˜ç‚¹æ˜¯ï¼Œæš—éƒ¨å¤Ÿæš—ï¼Œåœ¨å¾ˆçª„çš„ç¼éš™ä¸­èƒ½å¤Ÿå¾ˆé»‘å¾ˆé»‘ï¼Œè¿™æ˜¯åˆ«çš„ç®—æ³•åšä¸åˆ°çš„ã€‚
æœ¬æ–‡æå¤§åœ°å‚è€ƒäº†è‹±ç‰¹å°”çš„XeGTAOå¼€æºä»£ç ã€‚
å…·ä½“çš„æ“ä½œ è¿™ç¯‡æ–‡ç« ç€é‡è¦è®²çš„æ˜¯ä½¿ç”¨Compute Shaderæ¥åŠ é€Ÿè®¡ç®—çš„æ“ä½œæ–¹å¼ï¼Œå› æ­¤ä¸ä¼šå…·ä½“æ¶‰åŠåˆ°GTAOç®—æ³•æœ¬èº«ï¼Œæ„Ÿå…´è¶£çš„è¯å¯ä»¥å»SIGGRAPH 2016 Courseä¸Šé˜…è¯»GTAOçš„pptã€‚
GTAOçš„è®¡ç®—éœ€è¦è§†ç©ºé—´æ³•çº¿å’Œæ·±åº¦ä¸¤ä¸ªæ•°æ®ï¼Œå¦‚æœæ˜¯å»¶è¿Ÿç®¡çº¿çš„è¯èƒ½è½»æ˜“å¾—æ‹¿åˆ°æ‰€æœ‰æ•°æ®ï¼Œä½†å¯¹äºå‰å‘æ¸²æŸ“æ¥è¯´ï¼Œéœ€è¦ä»æ·±åº¦æ•°æ®è¿˜åŸå‡ºè§†ç©ºé—´æ³•çº¿ã€‚æ­£å¥½æˆ‘ä¹‹å‰çš„æ–‡ç« ä»‹ç»äº†ä¸€äº›ä»æ·±åº¦å›¾è®¡ç®—è§†ç©ºé—´æ³•çº¿çš„æ–¹æ³•ã€‚ä½†åœ¨åŸæœ‰æ–‡ç« çš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬è¿˜èƒ½ä½¿ç”¨Group Shared Memoryå¯¹é‡‡æ ·æ•°è¿›è¡Œä¸€ç³»åˆ—çš„ä¼˜åŒ–ã€‚
ç”±äºGTAOç›¸å¯¹æ¥è¯´ç®—æ˜¯æ¯”è¾ƒä½é¢‘çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨ä¸‹é‡‡æ ·çš„æ–¹å¼åªç”¨åŠåˆ†è¾¨ç‡ç”šè‡³æ˜¯æ›´ä½çš„åˆ†è¾¨ç‡æ¥è®¡ç®—GTAOã€‚è¿™é‡Œä½¿ç”¨çš„æ–¹æ³•æ˜¯å¯¹NxNå¤§å°çš„åŒºåŸŸï¼Œæ¯ä¸€å¸§åªå–ä¸€ä¸ªé‡‡æ ·ç‚¹ï¼Œæœ€åé€šè¿‡TAAæ¥è¿›è¡Œæ··åˆã€‚
GTAOæœ¬èº«çš„é‡‡æ ·æ•°ä¹Ÿèƒ½ä½¿ç”¨æ—¶ç©ºå™ªå£°æ¥ç”Ÿæˆè¾ƒå°‘çš„é‡‡æ ·ç‚¹ï¼Œæœ€åé€šè¿‡TAAæ¥è¿›è¡Œæ··åˆã€‚ä½†æ˜¯å®é™…ä½¿ç”¨ä¸­å‘ç°ï¼Œå¦‚æœä½¿ç”¨è¾ƒå¤šçš„æ—¶é—´æ··åˆï¼Œå½“åœºæ™¯ä¸­çš„ç‰©ä½“å‘ç”Ÿç§»åŠ¨ä¹‹åï¼Œä¼šéœ²å‡ºä¸€éƒ¨åˆ†ç™½è‰²çš„ç”»é¢ï¼Œå’Œè¾ƒæ·±çš„AOæœ‰æ¯”è¾ƒæ˜æ˜¾çš„å¯¹æ¯”ï¼Œå› æ­¤è€ƒè™‘å°½é‡å¤šåœ°ä½¿ç”¨ç©ºé—´çš„æ··åˆã€‚
å¾—ç›ŠäºGroup Shared Memoryï¼Œå¯ä»¥åœ¨éå¸¸å¤§çš„èŒƒå›´å†…è¿›è¡Œç©ºé—´çš„æ··åˆï¼Œè¿™é‡Œä½¿ç”¨é«˜æ–¯æ¨¡ç³Šçš„æ–¹å¼è¿›è¡Œæ··åˆï¼Œèƒ½å¤Ÿå°½é‡ä¿æŒæš—éƒ¨è¾ƒæš—çš„é¢œè‰²ã€‚å¦‚æœç›´æ¥å¯¹æ‰€æœ‰çš„é‡‡æ ·è¿›è¡Œå¹³å‡çš„è¯ï¼Œä¼šå¯¼è‡´æš—éƒ¨å˜å¾—å¾ˆäº®ï¼Œå¤±å»äº†GTAOæœ€å‡ºä¼—çš„ä¼˜ç‚¹ã€‚å¯¹æ°´å¹³å’Œç«–ç›´æ–¹å‘åšä¸¤æ¬¡é«˜æ–¯æ¨¡ç³Šçš„è¯ï¼Œç”±äºæœ¬èº«è¿˜ä¼šæ ¹æ®æ·±åº¦å’Œæ³•çº¿ç®—å‡ºé¢å¤–çš„å‡ ä½•ä¸Šçš„æƒé‡ï¼Œåœ¨ä¸‹é‡‡æ ·ç¨‹åº¦è¾ƒå¤§çš„æ—¶å€™ä¼šäº§ç”Ÿæ¯”è¾ƒæ˜æ˜¾çš„ç‘•ç–µï¼Œå¯ä»¥ç”¨å…¨åˆ†è¾¨ç‡çš„æ·±åº¦å›¾å’Œæ³•çº¿æ¥è§£å†³ï¼Œä½†è¿™ä¼šå¸¦æ¥é¢å¤–çš„é‡‡æ ·ã€‚
åœ¨é«˜æ–¯æ¨¡ç³Šçš„é˜¶æ®µï¼Œç”±äºæ¨¡ç³Šæ˜¯ä½œç”¨åœ¨ä½åˆ†è¾¨ç‡çš„å›¾åƒä¸Šçš„ï¼Œåœ¨æˆ‘ä»¬çš„ä¸Šé‡‡æ ·çš„æ“ä½œä¸­ï¼Œè¿˜éœ€è¦æ ¹æ®ä¸Šé‡‡æ ·çš„ä½ç½®è¿›è¡ŒåŒçº¿æ€§æ’å€¼ï¼ˆå®é™…ä¸Šåªè¦ä¸€ä¸ªæ–¹å‘çº¿æ€§æ’å€¼å°±å¥½äº†ï¼‰ã€‚
Render Textureçš„ç²¾åº¦ä¸Šï¼ŒGTAOæœ€åçš„å€¼å¯ä»¥ç”¨8ä½é€šé“æ¥å‚¨å­˜ï¼Œå¦‚æœä¸éœ€è¦é¢å¤–çš„è§†ç©ºé—´æ³•çº¿çš„è¯ï¼Œå¯ä»¥æŠŠGTAOå€¼å’Œ24ä½çš„æ·±åº¦ä¸€èµ·å­˜åˆ°RGBA32çš„RTä¸­ã€‚è¿™é‡Œå°±å·æ‡’ä½¿ç”¨R16G16B16A16_SFloatæ¥å‚¨å­˜äº†ã€‚
å¦‚æ­¤ä¸€æ¥æ•´ä¸ªè·¯çº¿å›¾å°±æ¯”è¾ƒæ¸…æ™°äº†
ä¸‹é‡‡æ ·æ·±åº¦å›¾è·å–æ·±åº¦æ•°æ® ä½¿ç”¨æ·±åº¦å›¾è®¡ç®—è§†ç©ºé—´çš„æ³•çº¿ï¼Œæˆ–è€…ä»G Bufferç›´æ¥è·å–æ³•çº¿æ•°æ® ä½¿ç”¨æ·±åº¦å›¾å’Œæ³•çº¿è®¡ç®—GTAOçš„å€¼ æ¨ªå‘ä¸Šé‡‡æ ·ï¼Œè®¡ç®—æ°´å¹³é«˜æ–¯æ¨¡ç³Šåçš„GTAOçš„å€¼ çºµå‘ä¸Šé‡‡æ ·ï¼Œè®¡ç®—å‚ç›´é«˜æ–¯æ¨¡ç³Šåçš„GTAOçš„å€¼ ç›¸å…³ä»£ç å’Œè¯´æ˜ GTAOComputeShader.compute é‡ä¸­ä¹‹é‡å°±æ˜¯Compute Shaderäº†ã€‚åˆ†äº†å››ä¸ªKernelï¼šç¬¬ä¸€ä¸ªè®¡ç®—GTAOçš„å€¼ï¼ŒåŒæ—¶è¿˜å‚¨å­˜äº†æ·±åº¦å›¾å’Œæ³•çº¿ï¼ˆé™¤äº†ç›´æ¥å‚¨å­˜æ³•çº¿çš„ä¸¤ä¸ªåˆ†é‡ï¼Œä¹Ÿå¯ä»¥Encodeæˆå…«é¢ä½“æ¥å‚¨å­˜ï¼‰ï¼›ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªåˆ†åˆ«æ˜¯æ°´å¹³å’Œç«–ç›´æ–¹å‘çš„æ¨¡ç³Šï¼›æœ€åä¸€ä¸ªç”¨æ¥å¯è§†åŒ–ï¼Œå®é™…é¡¹ç›®ä¸­å¯ä»¥ä¸ç”¨è¿™ä¸ªã€‚
å’ŒXeGTAOä¸åŒçš„æ˜¯ï¼Œæˆ‘å¢åŠ äº†ä¸€ä¸ªUSE_AVERAGE_COSçš„å®ï¼Œæ­£å¸¸æ˜¯åœ¨æ¯ä¸€ä¸ªSliceä¸­é€‰æ‹©æœ€å¤§çš„coså€¼ï¼Œä½†æ˜¯è€ƒè™‘åˆ°åœºæ™¯ä¸­æœ‰æ …æ ¼è¿™æ ·çš„ç‰©ä½“ï¼Œåœ¨æ—¶ç©ºæ··åˆç¨‹åº¦ä¸æ˜¯å¾ˆå¤§çš„æ—¶å€™ï¼Œå¯ä»¥è®¡ç®—cosçš„å¹³å‡å€¼æ¥é™ä½æ …æ ¼å¯¹GTAOçš„å½±å“ï¼ˆä¹Ÿå°±æ˜¯å‡å¼±äº†å™ªå£°ï¼‰ï¼Œè¿™ä¸ªå®å®Œå…¨å¯ä»¥ä¸ç”¨å¼€å¯ã€‚
æœ¬æ–‡ä¸ºäº†å°½é‡å¤šçš„ä½¿ç”¨ç©ºé—´æ··åˆï¼ˆäº¦å³ä¸ä½¿ç”¨æ—¶é—´æ··åˆï¼‰ï¼Œåœ¨XeGTAOçš„æ—¶ç©ºå¹³å‡å™ªæ³¢ä¸­é™åˆ¶äº†æ—¶é—´çš„å‚æ•°ä¸º13ï¼Œè¿™æ ·GTAOå°±ä¸ä¼šéšç€æ—¶é—´è€Œå˜åŒ–äº†ï¼Œå®é™…ä¸Šå¯ä»¥ä¼ å…¥_FrameIndexå……åˆ†åˆ©ç”¨æ—¶ç©ºå™ªæ³¢çš„ä¼˜åŠ¿ã€‚
ä¸»è¦æ˜¯ç”¨groupIndexæ¥å‚¨å­˜å’Œè¯»å–Group Shared Memoryï¼Œæ¯ä¸ªç‚¹è‡³å¤šé‡‡æ ·ä¸¤æ¬¡ã€‚è®¡ç®—æ³•çº¿æ—¶ä¼šé‡‡æ ·5x5çš„åŒºåŸŸï¼Œå› æ­¤NORMAL_FROM_DEPTH_PIXEL_RANGEçš„å€¼æ˜¯2ï¼›è®¡ç®—æ¨¡ç³Šæ—¶æ—¢æœ‰é«˜æ–¯æ¨¡ç³Šçš„é‡‡æ ·ï¼Œè¿˜æœ‰åç»­æ‰‹åŠ¨çº¿æ€§æ’å€¼çš„é‡‡æ ·ï¼Œæ‰€ä»¥CACHED_AO_NORMAL_DEPTH_FOR_BLUR_SIZEä¼šæœ‰ä¸¤è€…ä¹‹å’Œã€‚çº¿æ€§æ’å€¼è¿˜éœ€è¦æ³¨æ„subpixelBiaså¯¹çº¿æ€§æ’å€¼çš„æƒé‡äº§ç”Ÿçš„å½±å“ã€‚
æœ¬æ–‡ä½¿ç”¨äº†å®½åº¦ä¸º29çš„é«˜æ–¯æ ¸ï¼Œå¯ä»¥åœ¨demofoxçš„ç½‘ç«™ä¸Šè½»æ¾çš„è®¡ç®—å¾ˆå¤§çš„é«˜æ–¯æ ¸ã€‚
å¯èƒ½ä¼šæœ‰æŠ¥å¯„å­˜å™¨ä½¿ç”¨æ•°é‡è¶…è¿‡é™åˆ¶çš„é—®é¢˜ï¼Œæ„Ÿè§‰æ˜¯const arrayå’Œå¾ªç¯å¯¼è‡´çš„ï¼Œä¸è¿‡reimportä¹‹åå°±ä¸ä¼šæŠ¥è¿™ä¸ªè­¦å‘Šäº†ã€‚
#pragma kernel GTAOMain #pragma kernel BlurHorizontalMain #pragma kernel BlurVerticalMain #pragma kernel VisualizeMain #include "Packages/com.unity.render-pipelines.core/ShaderLibrary/Common.hlsl" #include "Packages/com.unity.render-pipelines.universal/ShaderLibrary/Core.hlsl" Texture2D&lt;float4> _ColorTexture; Texture2D&lt;float> _DepthTexture; Texture2D&lt;float4> _GTAOTexture; RWTexture2D&lt;float4> _RW_NormalTexture; RWTexture2D&lt;float4> _RW_GTAOTexture; RWTexture2D&lt;float4> _RW_BlurTexture; RWTexture2D&lt;float4> _RW_VisualizeTexture; SamplerState sampler_LinearClamp; SamplerState sampler_PointClamp; //region Parameters uint _FrameIndex; uint _DownsamplingFactor; float _Intensity; float _SampleRadius; float _DistributionPower; float _FalloffRange; float2 _HeightFogFalloff; float4 _TextureSize; float4 _TAAOffsets; //endregion //region Pre-defined Marcos #define SQRT2_2 0....</p></div><footer class=entry-footer><span title='2022-12-02 12:00:00 +0800 CST'>December 2, 2022</span>&nbsp;Â·&nbsp;zznewclear13</footer><a class=entry-link aria-label="post link to Unityä½¿ç”¨ComputeShaderè®¡ç®—GTAO" href=https://zznewclear13.github.io/posts/unity-ground-truth-ambient-occlusion/></a></article><article class=post-entry><figure class=entry-cover><img loading=lazy src=https://zznewclear13.github.io/posts/images/VolumetricFogRayMarched.jpg alt="Ray Marched Volumetric Fog Cover"></figure><header class=entry-header><h2 class=entry-hint-parent>ä½¿ç”¨Ray Marchingæ¥æ¸²æŸ“ä½“ç§¯é›¾</h2></header><div class=entry-content><p>ä¸ºä»€ä¹ˆè¦ç”¨Ray Marching è¦ä¸è¿˜æ˜¯åˆ«ç”¨Ray Marchingäº†ï¼ˆé™¤éæ˜¯SDF Ray Marchingï¼‰ï¼Œé‡‡æ ·æ¬¡æ•°åˆå¤šåˆä¸å¥½debugï¼Œä¸è¿‡å†™èµ·æ¥æ¯”è¾ƒå¿«ï¼ˆå¦‚æœè¦å†™äºŒåˆ†æ³•çš„è¯å°±åˆå¤æ‚äº†ï¼‰ã€‚å¦‚å‰æ–‡æ‰€è¯´ï¼Œä½¿ç”¨Ray Marchingçš„ä½“ç§¯é›¾åªèƒ½åœ¨åå¤„ç†é˜¶æ®µä½¿ç”¨äº†ï¼Œåœ¨å¤„ç†ä¸å†™æ·±åº¦çš„é€æ˜ç‰©ä½“çš„æ—¶å€™ï¼Œä¼šæœ‰ä¸€äº›ç‘•ç–µã€‚
ä½“ç§¯é›¾ç›¸å…³çš„å°±å‚è€ƒå‰æ–‡å°±å¥½äº†ï¼Œè¿™é‡Œåªæ˜¯ä½œä¸ºä¸€ä¸ªæ–¹æ³•çš„è¡¥å……ã€‚
ç›¸å…³ä»£ç å’Œè¯´æ˜ ä¸ºäº†å’Œä½¿ç”¨3Dçº¹ç†çš„ä½“ç§¯é›¾ä½œåŒºåˆ†ï¼Œè¿™è¾¹æ‰€æœ‰ä»£ç çš„åå­—å‰åŠ ä¸Šäº†RM(Ray Marching)ã€‚
RMVolumetricFog.cs è¿™ä¸ªè„šæœ¬å’Œ3Dçº¹ç†çš„ä½“ç§¯é›¾çš„å‚æ•°å‡ ä¹å®Œå…¨ä¸€è‡´ï¼Œåªæ˜¯å¤šäº†ç”¨äºæ§åˆ¶Ray Marchingæ¬¡æ•°çš„stepã€‚
using System; namespace UnityEngine.Rendering.Universal { [Serializable, VolumeComponentMenu("Post-processing/RM Volumetric Fog")] public class RMVolumetricFog : VolumeComponent, IPostProcessComponent { [Tooltip("æ˜¯å¦å¯ç”¨ä½“ç§¯é›¾")] public BoolParameter enabled = new BoolParameter(false); [Tooltip("æ•´ä½“æ§åˆ¶ä½“ç§¯é›¾å¼ºåº¦")] public ClampedFloatParameter intensity = new ClampedFloatParameter(1.0f, 0f, 1.0f); [Tooltip("ä½“ç§¯é›¾æœ€å¤§çš„é€æ˜ç¨‹åº¦ï¼ˆç”¨äºå’Œå¤©ç©ºæ··åˆï¼‰")] public ClampedFloatParameter maxTransmittance = new ClampedFloatParameter(1.0f, 0f, 1.0f); [Tooltip("ä½“ç§¯é›¾çš„é¢œè‰²å€¾å‘ï¼Œç›®å‰å¼ºåº¦ä¸º0.03")] public ColorParameter fogTint = new ColorParameter(Color.white); [Tooltip("ä½“ç§¯é›¾è·ç¦»ç›¸æœºæœ€è¿‘çš„è·ç¦»")] public ClampedFloatParameter fogNear = new ClampedFloatParameter(0.1f, 0.01f, 10f); [Tooltip("ä½“ç§¯é›¾è·ç¦»ç›¸æœºæœ€è¿œçš„è·ç¦»")] public ClampedFloatParameter fogFar = new ClampedFloatParameter(100f, 1....</p></div><footer class=entry-footer><span title='2022-08-24 12:00:00 +0800 CST'>August 24, 2022</span>&nbsp;Â·&nbsp;zznewclear13</footer><a class=entry-link aria-label="post link to ä½¿ç”¨Ray Marchingæ¥æ¸²æŸ“ä½“ç§¯é›¾" href=https://zznewclear13.github.io/posts/create-volumetric-fog-using-ray-marching/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://zznewclear13.github.io/posts/page/2/>Â«&nbsp;Prev&nbsp;
</a><a class=next href=https://zznewclear13.github.io/posts/page/4/>Next&nbsp;&nbsp;Â»</a></nav></footer><div style=display:none>zznewclear13 æŠ€æœ¯ç¾æœ¯ å›¾å½¢å­¦ ä¸ªäººåšå®¢ technical art computer graphics</div></main><footer class=footer><span>&copy; 2024 <a href=https://zznewclear13.github.io/>ZZNEWCLEAR13</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>